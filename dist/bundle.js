!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o,i=function(){function t(t,e,n){this.context=t,this.camera=e,this.canvas=n}return t.prototype.draw=function(t){this.context.beginPath(),t.draw(this),this.context.stroke()},t.prototype.arc=function(t,e,n,o,i){return this.context.arc(this.camera.X(t),this.camera.Y(e),this.camera.zTransform(n),o,i),this},t.prototype.fill=function(t){return this.context.fillStyle=t,this.context.fill(),this},t}(),r=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.context=new i(this.canvas.getContext("2d"),n,this),this.entities=[]}return t.prototype.appendTo=function(t){t.appendChild(this.canvas)},t.prototype.update=function(t){var e=this;this.entities.forEach((function(n){n.update(t),n.draw(t,e.context)}))},t}(),c=function(){function t(t,e,n){this.coords=t,this.radius=e,this.color=n}return t.prototype.draw=function(t){t.arc(this.coords.x,this.coords.y,this.radius,0,2*Math.PI),t.fill(this.color)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),s=6.674*Math.pow(10,-11);!function(t){t[t.PLAY=0]="PLAY",t[t.PAUSE=1]="PAUSE"}(o||(o={}));o.PLAY;var a=7884e3,u=18e7,h=s,d=1,f=2.5,y=.1,p=25,l=1e4,v=1e4,m=.1,x=29780,b=function(t,e){var n=function(t,e){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))*u}(t.coords,e.coords);if(0!=n&&!Number.isNaN(n))return h*(t.mass*e.mass/(n*n))*d},w=function(t,e,n,o){return-(t-e)/(Math.abs(n.x-o.x)+Math.abs(n.y-o.y))},g=function(t,e,n,o){var i=b(e,n)/e.mass/u;t.accelerate(i*w(e.coords.x,n.coords.x,e.coords,n.coords),i*w(e.coords.y,n.coords.y,e.coords,n.coords),o)},z=function(){function t(t,e,n,o,i,r,s){this.id=t,this.coords=e,this.radius=n,this.mass=o,this.color=i,this.velocity=r,this.planets=s,this.entities=[],this.model=new c(this.coords,this.radius,this.color)}return t.prototype.getEntities=function(){return this.entities},t.prototype.update=function(t){for(var e in this.planets){var n=this.planets[e];n.id!=this.id&&g(this.velocity,this,n,t)}this.velocity.apply(this.coords,t),this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.draw(this.model)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),C=function(){function t(){this.entities=[]}return t.prototype.update=function(t){this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.context.clearRect(0,0,e.canvas.canvas.width,e.canvas.canvas.height),e.canvas.canvas.style.backgroundColor="#000000",this.entities.forEach((function(n){return n.draw(t,e)})),e.context.stroke()},t.prototype.getEntities=function(){return this.entities},t}(),P=function(){function t(t,e,n){this.x=0,this.y=0,this.z=1,this.x=t,this.y=e,this.z=n}return t.prototype.X=function(t){return this.zTransform(t-this.x)},t.prototype.Y=function(t){return this.zTransform(t-this.y)},t.prototype.zTransform=function(t){return t*(1/this.z)},t.prototype.relativeX=function(t){return this.x+t},t.prototype.relativeY=function(t){return this.y+t},t}(),E=function(){function t(t,e){var n=this;this.camera=t,this.canvas=e,this.actionByKeycode={82:function(){n.camera.x=0,n.camera.y=0,n.camera.z=1},90:function(){n.camera.z<=m||(n.camera.z-=y)},88:function(){n.camera.z+=y},37:function(){n.camera.x-p<=0||(n.camera.x-=p)},38:function(){n.camera.y-p<=0||(n.camera.y-=p)},39:function(){n.camera.x>=l||(n.camera.x+=p)},40:function(){n.camera.y>=v||(n.camera.y+=p)}}}return t.prototype.handleKeyboard=function(t){null!=this.actionByKeycode&&this.actionByKeycode[t.keyCode]&&this.actionByKeycode[t.keyCode]()},t}(),S=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.accelerate=function(t,e,n){this.x+=t*n,this.y+=e*n},t.prototype.apply=function(t,e){t.x+=this.x*e,t.y+=this.y*e},t}(),M=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.setCoordinates=function(t,e){this.x=t,this.y=e},t}(),T=function(t,e,n){n.context.context.font="30px Verdana",n.update(e/1e3*a),n.context.context.fillText("Hey Chuck! ðŸ¤˜",n.canvas.width/2-100,30),n.context.context.fillText("ðŸ¤˜ Clique moi dessus ðŸ¤˜",n.canvas.width/2-165,60),n.canvas.addEventListener("click",(function(t){document.querySelector("#audio").play()})),window.requestAnimationFrame((function(e){return T(e,e-t,n)}))};document.onreadystatechange=function(){if("complete"==document.readyState){var t=new P(l/2,v/2,f),e=new r(document.body.clientWidth,document.body.clientHeight,t);e.appendTo(document.body);var n=new C,o=new E(t,e),i=function(t,e){var n={x:e.relativeX(e.z*(t.canvas.width/2)),y:e.relativeY(e.z*(t.canvas.height/2)),radius:120,mass:1.9891e30,color:"orange",velocity:[0,0]};return{sun41:n,"earth alors":{x:n.x-14996e7/u,y:n.y,radius:30,mass:5972e21,color:"skyblue",velocity:[x/u*1/3,x/u*2/3]},interloper:{x:n.x+10096e7/u,y:n.y+20,radius:24,mass:3972e21,color:"red",velocity:[x/u*1/3,x/u*2/3]}}}(e,t),c=[];for(var s in document.querySelector("body").addEventListener("keydown",o.handleKeyboard.bind(o)),i){var a=i[s];c.push(new z(s,new M(a.x,a.y),a.radius,a.mass,a.color,new S(a.velocity[0],a.velocity[1]),c))}n.entities=c,e.entities.push(n),T(0,0,e)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9Db250ZXh0LnRzIiwid2VicGFjazovLy8uL3NyYy9Db25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9DYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVsL0Rpc2MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9HcmF2aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvR2VvbWV0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BsYW5ldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2NlbmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbWVyYS9DYW1lcmEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xzL0tleWJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvVmVsb2NpdHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9Db29yZGluYXRlcy50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9wbGFuZXRzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUGxheU1vZGUiLCJjb250ZXh0IiwiY2FtZXJhIiwiY2FudmFzIiwiZHJhdyIsIm1vZGVsIiwidGhpcyIsImJlZ2luUGF0aCIsInN0cm9rZSIsImFyYyIsIngiLCJ5IiwiYXMiLCJhZSIsIlgiLCJZIiwielRyYW5zZm9ybSIsImZpbGwiLCJjb2xvciIsImZpbGxTdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImVudGl0aWVzIiwiYXBwZW5kVG8iLCJlbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJ1cGRhdGUiLCJkZWx0YSIsImZvckVhY2giLCJlIiwiY29vcmRzIiwicmFkaXVzIiwiY3R4IiwiTWF0aCIsIlBJIiwiZ2V0Q29vcmRpbmF0ZXMiLCJzZXRDb29yZGluYXRlcyIsIkciLCJwb3ciLCJQTEFZIiwia21QZXJQeCIsImdldEZvcmNlIiwiYSIsImIiLCJkaXN0IiwiYWJzIiwiQ29uZmlnIiwiTnVtYmVyIiwiaXNOYU4iLCJtYXNzIiwiZ2V0Rm9yY2VSYXRpbyIsImRpckEiLCJkaXJCIiwiY29vcmRBIiwiY29vcmRCIiwidmVsb2NpdHkiLCJhY2MiLCJhY2NlbGVyYXRlIiwiaWQiLCJwbGFuZXRzIiwiZ2V0RW50aXRpZXMiLCJhcHBseSIsImNsZWFyUmVjdCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwieiIsInYiLCJyZWxhdGl2ZVgiLCJyZWxhdGl2ZVkiLCJhY3Rpb25CeUtleWNvZGUiLCI4MiIsIjkwIiwiODgiLCIzNyIsIjM4IiwiMzkiLCI0MCIsImhhbmRsZUtleWJvYXJkIiwiZXZlbnQiLCJ1bmRlZmluZWQiLCJrZXlDb2RlIiwib2JqIiwibWFpbiIsInQxIiwiYm9hcmQiLCJmb250IiwiZmlsbFRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInBsYXkiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiYm9keSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0Iiwic2NlbmUiLCJrZXli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S0FDRnRELEVBQUVvQixNQUNGLElBQUksRUFBU3BCLEVBQUU0RCxTQUFTLEdBQUk1RCxFQUFFNEQsU0FBUyxJQUN2Q0ksSUFJUnNDLEVBQU0zRSxTQUFXcUMsRUFDakJ5QixFQUFNOUQsU0FBUytFLEtBQUtKLEdBRXBCZixFQUFLLEVBQUcsRUFBR0UiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IE1vZGVsIGZyb20gXCIuLi9Nb2RlbC9Nb2RlbFwiXG5pbXBvcnQgQ2FtZXJhIGZyb20gXCIuLi9DYW1lcmEvQ2FtZXJhXCJcbmltcG9ydCBDYW52YXMgZnJvbSBcIi4vQ2FudmFzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICByZWFkb25seSBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgIHJlYWRvbmx5IGNhbWVyYTogQ2FtZXJhLFxuICAgICAgICByZWFkb25seSBjYW52YXM6IENhbnZhcyxcbiAgICAgICAgKSB7fVxuXG4gICAgZHJhdyhtb2RlbDogTW9kZWwpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpXG4gICAgICAgIG1vZGVsLmRyYXcodGhpcylcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZSgpXG4gICAgfVxuXG4gICAgYXJjKHg6IG51bWJlciwgeTogbnVtYmVyLCByOiBudW1iZXIsIGFzOiBudW1iZXIsIGFlOiBudW1iZXIpOiBDb250ZXh0IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LmFyYyh0aGlzLmNhbWVyYS5YKHgpLCB0aGlzLmNhbWVyYS5ZKHkpLCB0aGlzLmNhbWVyYS56VHJhbnNmb3JtKHIpLCBhcywgYWUpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgZmlsbChjb2xvcjogc3RyaW5nKTogQ29udGV4dCB7XG4gICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBjb2xvclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbCgpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxufVxuXG50eXBlIERyYXdGdW5jdGlvbiA9IChjdHg6IENvbnRleHQpID0+IHZvaWRcblxuZXhwb3J0IHtcbiAgICBEcmF3RnVuY3Rpb25cbn0iLCJjb25zdCBjRHVyYXRpb24gPSAwXG5jb25zdCBmcHMgPSAyMFxuY29uc3QgZHBmID0gMSAvIGZwcyAqIDEwMDBcbmxldCB6b29tTGV2ZWwgPSAyLjVcbmxldCB6b29tTWluID0gMC4xXG5jb25zdCB6b29tQWN0aW9uUG93ID0gMC4xMFxuY29uc3QgZGVjYWxCeU1vdmUgPSAyNVxuXG5sZXQgbWF4UGxhbmV0cyA9IDRcbmxldCBwbGFuZXRzUmFkaXVzRGVmID0ge21pbjogMywgbWF4OiA3MH1cbmNvbnN0IHBsYW5ldHNNaW5EaXN0ID0gMTBcbmNvbnN0IHBsYW5ldEJhc2VTcGVlZCA9IDQwXG5cbmNvbnN0IHNwYWNlVyA9IDEwMDAwXG5jb25zdCBzcGFjZUggPSAxMDAwMFxuY29uc3QgZGVjYWxYID0gc3BhY2VXIC8gMlxuY29uc3QgZGVjYWxZID0gc3BhY2VIIC8gMlxuXG5jb25zdCBncmF2aXR5UHVsbEJ5RGVsdGEgPSAxXG5jb25zdCBkaXN0UG93ID0gNVxuXG5jb25zdCBmb250U2l6ZSA9IDE0XG5sZXQgZGVidWcgPSBudWxsXG5jb25zdCBlYXJ0aFNwZWVkID0gMjkuNzggKiAxMDAwXG5jb25zdCBHID0gTWF0aC5wb3coMTAsIC0xMSkgKiA2LjY3NFxuXG5lbnVtIFBsYXlNb2RlIHtcbiAgICBQTEFZLFxuICAgIFBBVVNFXG59XG5cbmNvbnN0IG1vZGUgPSBQbGF5TW9kZS5QTEFZXG4vLyBjb25zdCBrbVBlclB4ID0gMS4zZTVcbmNvbnN0IGttUGVyUHggPSAxLjhlNVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZ2FtZVNwZWVkOiAzNjUgKiAyNCAqIDYwICogMTUsXG4gICAgLy8gZ2FtZVNwZWVkOiAxMDAsXG4gICAga21QZXJQeCxcbiAgICBtUGVyUHg6IGttUGVyUHggKiAxMDAwLFxuICAgIGtnUGVyUHhEZW5zaXR5OiAxMjAwLFxuICAgIEcsXG4gICAgZ3Jhdml0eVB1bGxCeURlbHRhLFxuICAgIGNEdXJhdGlvbixcbiAgICBmcHMsXG4gICAgZHBmLFxuICAgIHpvb21MZXZlbCxcbiAgICB6b29tQWN0aW9uUG93LFxuICAgIGRlY2FsQnlNb3ZlLFxuICAgIG1heFBsYW5ldHMsXG4gICAgcGxhbmV0c1JhZGl1c0RlZixcbiAgICBwbGFuZXRzTWluRGlzdCxcbiAgICBwbGFuZXRCYXNlU3BlZWQsXG4gICAgc3BhY2VXLFxuICAgIHNwYWNlSCxcbiAgICBkZWNhbFgsXG4gICAgZGVjYWxZLFxuICAgIGRpc3RQb3csXG4gICAgZm9udFNpemUsXG4gICAgZGVidWcsXG4gICAgUGxheU1vZGUsXG4gICAgbW9kZSxcbiAgICB6b29tTWluLFxuICAgIGVhcnRoU3BlZWRcbn0iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuLi9FbnRpdHkvRW50aXR5XCJcbmltcG9ydCBDb250ZXh0IGZyb20gXCIuL0NvbnRleHRcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi4vQ2FtZXJhL0NhbWVyYVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gICAgcmVhZG9ubHkgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudFxuICAgIHJlYWRvbmx5IGNvbnRleHQ6IENvbnRleHRcbiAgICBwdWJsaWMgZW50aXRpZXM6IEVudGl0eVtdXG5cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgY2FtZXJhOiBDYW1lcmEpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGhcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG5ldyBDb250ZXh0KHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSwgY2FtZXJhLCB0aGlzKVxuICAgICAgICB0aGlzLmVudGl0aWVzID0gW11cbiAgICB9XG5cbiAgICBhcHBlbmRUbyhlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKVxuICAgIH1cblxuICAgIHVwZGF0ZShkZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgIGUudXBkYXRlKGRlbHRhKVxuICAgICAgICAgICAgZS5kcmF3KGRlbHRhLCB0aGlzLmNvbnRleHQpXG4gICAgICAgIH0pXG4gICAgfVxufSIsImltcG9ydCBDb250ZXh0IGZyb20gXCIuLi9DYW52YXMvQ29udGV4dFwiXG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4uL1BoeXNpYy9Db29yZGluYXRlc1wiXG5pbXBvcnQgTW9kZWwgZnJvbSBcIi4vTW9kZWxcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNjIGltcGxlbWVudHMgTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBjb29yZHM6IENvb3JkaW5hdGVzLCBwdWJsaWMgcmFkaXVzOiBudW1iZXIsIHB1YmxpYyBjb2xvcjogc3RyaW5nKSB7fVxuXG4gICAgZHJhdyhjdHg6IENvbnRleHQpIHtcbiAgICAgICAgY3R4LmFyYyh0aGlzLmNvb3Jkcy54LCB0aGlzLmNvb3Jkcy55LCB0aGlzLnJhZGl1cywgMCwgMiAqIE1hdGguUEkpXG4gICAgICAgIGN0eC5maWxsKHRoaXMuY29sb3IpXG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZXMoKTogQ29vcmRpbmF0ZXMge1xuICAgICAgICByZXR1cm4gdGhpcy5jb29yZHNcbiAgICB9XG5cbiAgICBzZXRDb29yZGluYXRlcyhjb29yZHM6IENvb3JkaW5hdGVzKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29vcmRzID0gY29vcmRzXG4gICAgfVxufSIsImltcG9ydCBWZWxvY2l0eSBmcm9tIFwiLi9WZWxvY2l0eVwiO1xuaW1wb3J0IFBsYW5ldCBmcm9tIFwiLi4vUGxhbmV0XCJcbmltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi9Db29yZGluYXRlc1wiXG5pbXBvcnQgKiBhcyBHZW9tZXRyeSBmcm9tIFwiLi9HZW9tZXRyeVwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuLi9Db25maWdcIlxuXG5jb25zdCBnZXRGb3JjZSA9IChhOiBQbGFuZXQsIGI6IFBsYW5ldCk6IG51bWJlciA9PiB7XG4gICAgY29uc3QgZGlzdCA9IEdlb21ldHJ5LmdldERpc3RhbmNlQmV0d2Vlbk9iamVjdHMoYS5jb29yZHMsIGIuY29vcmRzKVxuICAgIGlmIChkaXN0ID09IDAgfHwgTnVtYmVyLmlzTmFOKGRpc3QpKSB7XG4gICAgICAgIHJldHVybiBcbiAgICB9XG4gICAgY29uc3QgRiA9IENvbmZpZy5HICogKChhLm1hc3MqYi5tYXNzKS8oZGlzdCpkaXN0KSlcblxuICAgIHJldHVybiBGICogQ29uZmlnLmdyYXZpdHlQdWxsQnlEZWx0YVxufVxuXG5jb25zdCBnZXRGb3JjZVJhdGlvID0gKGRpckE6IG51bWJlciwgZGlyQjogbnVtYmVyLCBjb29yZEE6IENvb3JkaW5hdGVzLCBjb29yZEI6IENvb3JkaW5hdGVzKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gLShkaXJBIC0gZGlyQikgLyAoTWF0aC5hYnMoY29vcmRBLnggLSBjb29yZEIueCkgKyBNYXRoLmFicyhjb29yZEEueSAtIGNvb3JkQi55KSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgKHZlbG9jaXR5OiBWZWxvY2l0eSwgYTogUGxhbmV0LCBiOiBQbGFuZXQsIGRlbHRhOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBhY2MgPSAoZ2V0Rm9yY2UoYSwgYikgLyBhLm1hc3MpIC8gQ29uZmlnLm1QZXJQeFxuICAgIHZlbG9jaXR5LmFjY2VsZXJhdGUoXG4gICAgICAgIGFjYyAqIGdldEZvcmNlUmF0aW8oYS5jb29yZHMueCwgYi5jb29yZHMueCwgYS5jb29yZHMsIGIuY29vcmRzKSxcbiAgICAgICAgYWNjICogZ2V0Rm9yY2VSYXRpbyhhLmNvb3Jkcy55LCBiLmNvb3Jkcy55LCBhLmNvb3JkcywgYi5jb29yZHMpLFxuICAgICAgICBkZWx0YVxuICAgIClcbn0iLCJpbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4vQ29vcmRpbmF0ZXNcIlxuaW1wb3J0IENvbmZpZyBmcm9tIFwiLi4vQ29uZmlnXCJcblxuY29uc3QgZ2V0RGlzdGFuY2VCZXR3ZWVuT2JqZWN0cyA9IChhOiBDb29yZGluYXRlcywgYjogQ29vcmRpbmF0ZXMpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiAoTWF0aC5hYnMoYi54IC0gYS54KSArIE1hdGguYWJzKGIueSAtIGEueSkpICogQ29uZmlnLm1QZXJQeFxufVxuXG5leHBvcnQge1xuICAgIGdldERpc3RhbmNlQmV0d2Vlbk9iamVjdHNcbn0iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuL0VudGl0eS9FbnRpdHlcIlxuaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuL1BoeXNpYy9Db29yZGluYXRlc1wiXG5pbXBvcnQgQ29udGV4dCBmcm9tIFwiLi9DYW52YXMvQ29udGV4dFwiXG5pbXBvcnQgRGlzYyBmcm9tIFwiLi9Nb2RlbC9EaXNjXCJcbmltcG9ydCBWZWxvY2l0eSBmcm9tIFwiLi9QaHlzaWMvVmVsb2NpdHlcIlxuaW1wb3J0IGFwcGx5R3Jhdml0eSBmcm9tIFwiLi9QaHlzaWMvR3Jhdml0eVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYW5ldCBpbXBsZW1lbnRzIEVudGl0eSB7XG4gICAgcHVibGljIGVudGl0aWVzOiBFbnRpdHlbXSA9IFtdXG4gICAgcHVibGljIG1vZGVsOiBEaXNjXG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGlkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBjb29yZHM6IENvb3JkaW5hdGVzLFxuICAgICAgICByZWFkb25seSByYWRpdXM6IG51bWJlcixcbiAgICAgICAgcmVhZG9ubHkgbWFzczogbnVtYmVyLFxuICAgICAgICByZWFkb25seSBjb2xvcjogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgdmVsb2NpdHk6IFZlbG9jaXR5LFxuICAgICAgICByZWFkb25seSBwbGFuZXRzOiBQbGFuZXRbXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSBuZXcgRGlzYyh0aGlzLmNvb3JkcywgdGhpcy5yYWRpdXMsIHRoaXMuY29sb3IpXG4gICAgICAgIH1cblxuICAgIGdldEVudGl0aWVzKCk6IEVudGl0eVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXNcbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMucGxhbmV0cykge1xuICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMucGxhbmV0c1tpXVxuXG4gICAgICAgICAgICBpZiAocC5pZCA9PSB0aGlzLmlkKSB7XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwcGx5R3Jhdml0eSh0aGlzLnZlbG9jaXR5LCB0aGlzLCBwLCBkZWx0YSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZlbG9jaXR5LmFwcGx5KHRoaXMuY29vcmRzLCBkZWx0YSlcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pZCwgdGhpcy5jb29yZHMpXG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IGUudXBkYXRlKGRlbHRhKSlcbiAgICB9XG5cbiAgICBkcmF3KGRlbHRhOiBudW1iZXIsIGNvbnRleHQ6IENvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgY29udGV4dC5kcmF3KHRoaXMubW9kZWwpXG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZXMoKTogQ29vcmRpbmF0ZXMge1xuICAgICAgICByZXR1cm4gdGhpcy5jb29yZHNcbiAgICB9XG5cbiAgICBzZXRDb29yZGluYXRlcyhjb29yZHM6IENvb3JkaW5hdGVzKTogdm9pZCB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNvb3JkcylcbiAgICAgICAgdGhpcy5jb29yZHMgPSBjb29yZHNcbiAgICAgICAgLy8gdGhpcy5tb2RlbC5zZXRDb29yZGluYXRlcyh0aGlzLmNvb3JkcylcbiAgICB9XG59IiwiaW1wb3J0IEVudGl0eSBmcm9tIFwiLi4vRW50aXR5L0VudGl0eVwiXG5pbXBvcnQgQ29udGV4dCBmcm9tIFwiLi4vQ2FudmFzL0NvbnRleHRcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY2VuZSBpbXBsZW1lbnRzIEVudGl0eSB7XG4gICAgcHVibGljIGVudGl0aWVzOiBFbnRpdHlbXSA9IFtdXG5cbiAgICB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZSA9PiBlLnVwZGF0ZShkZWx0YSkpXG4gICAgfVxuXG4gICAgZHJhdyhkZWx0YTogbnVtYmVyLCBjb250ZXh0OiBDb250ZXh0KTogdm9pZCB7XG4gICAgICAgIGNvbnRleHQuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY29udGV4dC5jYW52YXMuY2FudmFzLndpZHRoLCBjb250ZXh0LmNhbnZhcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5jYW52YXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzAwMDAwMFwiXG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IGUuZHJhdyhkZWx0YSwgY29udGV4dCkpXG4gICAgICAgIGNvbnRleHQuY29udGV4dC5zdHJva2UoKTsgICAgXG4gICAgfVxuXG4gICAgZ2V0RW50aXRpZXMoKTogRW50aXR5W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGllc1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmEge1xuICAgIHB1YmxpYyB4OiBudW1iZXIgPSAwXG4gICAgcHVibGljIHk6IG51bWJlciA9IDBcbiAgICBwdWJsaWMgejogbnVtYmVyID0gMVxuXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgICAgICB0aGlzLnggPSB4XG4gICAgICAgIHRoaXMueSA9IHlcbiAgICAgICAgdGhpcy56ID0gelxuICAgIH1cblxuICAgIFgoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuelRyYW5zZm9ybSh4IC0gdGhpcy54KVxuICAgIH1cblxuICAgIFkoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuelRyYW5zZm9ybSh5IC0gdGhpcy55KVxuICAgIH1cblxuICAgIHpUcmFuc2Zvcm0odjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHYgKiAoMSAvIHRoaXMueilcbiAgICB9XG5cbiAgICByZWxhdGl2ZVgoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCArIHhcbiAgICB9XG5cbiAgICByZWxhdGl2ZVkoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueSArIHlcbiAgICB9XG59IiwiaW1wb3J0IENhbWVyYSBmcm9tIFwiLi4vQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuLi9Db25maWdcIlxuaW1wb3J0IENhbnZhcyBmcm9tIFwiLi4vQ2FudmFzL0NhbnZhc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtleWJvYXJkIHtcbiAgICBwdWJsaWMgYWN0aW9uQnlLZXljb2RlOiB7W2tleTogbnVtYmVyXTogRnVuY3Rpb259XG5cbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBjYW1lcmE6IENhbWVyYSwgcmVhZG9ubHkgY2FudmFzOiBDYW52YXMpIHtcbiAgICAgICAgdGhpcy5hY3Rpb25CeUtleWNvZGUgPSB7XG4gICAgICAgICAgICAvLyA2ODogKCkgPT4ge2RlYnVnLlRvZ2dsZSgpO30sXG4gICAgICAgICAgICAvLyA4MzogKCkgPT4ge21vZGUgPSBtb2RlID09IFBBVVNFID8gUExBWSA6IFBBVVNFO30sXG4gICAgICAgICAgICA4MjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnggPSAwXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueSA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS56ID0gMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDkwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnogPD0gQ29uZmlnLnpvb21NaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnogLT0gQ29uZmlnLnpvb21BY3Rpb25Qb3dcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA4ODogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnogKz0gQ29uZmlnLnpvb21BY3Rpb25Qb3dcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAzNzogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS54IC0gQ29uZmlnLmRlY2FsQnlNb3ZlIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS54IC09IENvbmZpZy5kZWNhbEJ5TW92ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDM4OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnkgLSBDb25maWcuZGVjYWxCeU1vdmUgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnkgLT0gQ29uZmlnLmRlY2FsQnlNb3ZlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMzk6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueCA+PSBDb25maWcuc3BhY2VXKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueCArPSBDb25maWcuZGVjYWxCeU1vdmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA0MDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS55ID49IENvbmZpZy5zcGFjZUgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS55ICs9IENvbmZpZy5kZWNhbEJ5TW92ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5Ym9hcmQoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uQnlLZXljb2RlID09IHVuZGVmaW5lZCB8fCBcbiAgICAgICAgICAgICF0aGlzLmFjdGlvbkJ5S2V5Y29kZVtldmVudC5rZXlDb2RlXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9uQnlLZXljb2RlW2V2ZW50LmtleUNvZGVdKCk7XG4gICAgfVxufSIsImltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi9Db29yZGluYXRlc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlbG9jaXR5IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyKSB7fVxuXG4gICAgYWNjZWxlcmF0ZSh4OiBudW1iZXIsIHk6IG51bWJlciwgZGVsdGE6IG51bWJlcikge1xuICAgICAgICB0aGlzLnggKz0geCAqIGRlbHRhXG4gICAgICAgIHRoaXMueSArPSB5ICogZGVsdGFcbiAgICB9XG5cbiAgICBhcHBseShvYmo6IENvb3JkaW5hdGVzLCBkZWx0YTogbnVtYmVyKSB7XG4gICAgICAgIG9iai54ICs9IHRoaXMueCAqIGRlbHRhXG4gICAgICAgIG9iai55ICs9IHRoaXMueSAqIGRlbHRhXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb3JkaW5hdGVzIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyKSB7fVxuXG4gICAgc2V0Q29vcmRpbmF0ZXMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy54ID0geFxuICAgICAgICB0aGlzLnkgPSB5XG4gICAgfVxufSIsImltcG9ydCBDYW52YXMgZnJvbSBcIi4vc3JjL0NhbnZhcy9DYW52YXNcIlxuaW1wb3J0IFBsYW5ldCBmcm9tIFwiLi9zcmMvUGxhbmV0XCJcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi9zcmMvU2NlbmUvaW5kZXhcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi9zcmMvQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgS2V5Ym9hcmQgZnJvbSBcIi4vc3JjL0NvbnRyb2xzL0tleWJvYXJkXCJcbmltcG9ydCBDb25maWcgZnJvbSBcIi4vc3JjL0NvbmZpZ1wiXG5pbXBvcnQgVmVsb2NpdHkgZnJvbSBcIi4vc3JjL1BoeXNpYy9WZWxvY2l0eVwiXG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4vc3JjL1BoeXNpYy9Db29yZGluYXRlc1wiXG5cbmltcG9ydCBnZXRQbGFuZXRzIGZyb20gXCIuL3BsYW5ldHNcIlxuXG5sZXQgY1RpbWUgPSAwXG5cbmNvbnN0IG1haW4gPSAodDE6IG51bWJlciwgZGVsdGE6IG51bWJlciwgYm9hcmQ6IENhbnZhcykgPT4ge1xuICAgIC8vIGNUaW1lICs9IGRlbHRhXG4gICAgLy8gaWYgKGNUaW1lID4gQ29uZmlnLmRwZikge1xuICAgICAgICBib2FyZC5jb250ZXh0LmNvbnRleHQuZm9udCA9IFwiMzBweCBWZXJkYW5hXCI7XG4gICAgICAgIGJvYXJkLnVwZGF0ZSgoZGVsdGEgLyAxMDAwKSAqIENvbmZpZy5nYW1lU3BlZWQpXG4gICAgICAgIGJvYXJkLmNvbnRleHQuY29udGV4dC5maWxsVGV4dChcIkhleSBDaHVjayEg8J+kmFwiLCBib2FyZC5jYW52YXMud2lkdGggLyAyIC0gMTAwLCAzMCk7XG4gICAgICAgIGJvYXJkLmNvbnRleHQuY29udGV4dC5maWxsVGV4dChcIvCfpJggQ2xpcXVlIG1vaSBkZXNzdXMg8J+kmFwiLCBib2FyZC5jYW52YXMud2lkdGggLyAyIC0gMTY1LCA2MCk7XG4gICAgICAgIGJvYXJkLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50ICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXVkaW9cIilcbiAgICAgICAgICAgIGF1ZGlvLnBsYXkoKVxuICAgICAgICB9KVxuICAgICAgICAvLyBjVGltZSAtPSBDb25maWcuZHBmXG4gICAgLy8gfVxuXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0ID0+IG1haW4odCwgdCAtIHQxLCBib2FyZCkpXG59XG5cbmRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBDYW1lcmEoQ29uZmlnLnNwYWNlVyAvIDIsIENvbmZpZy5zcGFjZUggLyAyLCBDb25maWcuem9vbUxldmVsKVxuICAgIGNvbnN0IGJvYXJkID0gbmV3IENhbnZhcyhkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCwgY2FtZXJhKVxuICAgIGJvYXJkLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpXG4gICAgXG4gICAgY29uc3Qgc2NlbmUgPSBuZXcgU2NlbmUoKVxuICAgIGNvbnN0IGtleWJvYXJkQ29udHJvbHMgPSBuZXcgS2V5Ym9hcmQoY2FtZXJhLCBib2FyZClcbiAgICBjb25zdCBwbGFuZXRzQ29uZmlnID0gZ2V0UGxhbmV0cyhib2FyZCwgY2FtZXJhKVxuICAgIGxldCBwbGFuZXRzOiBQbGFuZXRbXSA9IFtdXG5cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGtleWJvYXJkQ29udHJvbHMuaGFuZGxlS2V5Ym9hcmQuYmluZChrZXlib2FyZENvbnRyb2xzKSk7XG4gICAgXG4gICAgZm9yIChsZXQgaSBpbiBwbGFuZXRzQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwbGFuZXRzQ29uZmlnW2ldXG4gICAgICAgIHBsYW5ldHMucHVzaChuZXcgUGxhbmV0KGksXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZXMocC54LCBwLnkpLFxuICAgICAgICAgICAgcC5yYWRpdXMsXG4gICAgICAgICAgICBwLm1hc3MsXG4gICAgICAgICAgICBwLmNvbG9yLFxuICAgICAgICAgICAgbmV3IFZlbG9jaXR5KHAudmVsb2NpdHlbMF0sIHAudmVsb2NpdHlbMV0pLFxuICAgICAgICAgICAgcGxhbmV0c1xuICAgICAgICAgICAgKSlcbiAgICB9XG5cbiAgICBzY2VuZS5lbnRpdGllcyA9IHBsYW5ldHNcbiAgICBib2FyZC5lbnRpdGllcy5wdXNoKHNjZW5lKVxuICAgIFxuICAgIG1haW4oMCwgMCwgYm9hcmQpXG4gfSIsImltcG9ydCBDYW52YXMgZnJvbSBcIi4vc3JjL0NhbnZhcy9DYW52YXNcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi9zcmMvQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuL3NyYy9Db25maWdcIlxuXG5leHBvcnQgZGVmYXVsdCAoY2FudmFzOiBDYW52YXMsIGNhbWVyYTogQ2FtZXJhKToge1trZXk6IHN0cmluZ106IGFueX0gPT4ge1xuICAgIGNvbnN0IHN1biA9IHtcbiAgICAgICAgeDogY2FtZXJhLnJlbGF0aXZlWChjYW1lcmEueiAqIChjYW52YXMuY2FudmFzLndpZHRoIC8gMikpLFxuICAgICAgICB5OiBjYW1lcmEucmVsYXRpdmVZKGNhbWVyYS56ICogKGNhbnZhcy5jYW52YXMuaGVpZ2h0IC8gMikpLFxuICAgICAgICByYWRpdXM6IDEyMCxcbiAgICAgICAgbWFzczogMS45ODkxZTMwLFxuICAgICAgICBjb2xvcjogXCJvcmFuZ2VcIixcbiAgICAgICAgdmVsb2NpdHk6IFswLCAwXVxuICAgIH1cbiAgICBjb25zdCBlYXJ0aCA9IHtcbiAgICAgICAgeDogc3VuLnggLSAoMTQ5Ljk2ZTkgLyBDb25maWcubVBlclB4KSxcbiAgICAgICAgeTogc3VuLnksXG4gICAgICAgIHJhZGl1czogMzAsXG4gICAgICAgIG1hc3M6IDUuOTcyZTI0LFxuICAgICAgICBjb2xvcjogXCJza3libHVlXCIsXG4gICAgICAgIHZlbG9jaXR5OiBbKENvbmZpZy5lYXJ0aFNwZWVkIC8gQ29uZmlnLm1QZXJQeCkgKiAxLzMsIChDb25maWcuZWFydGhTcGVlZCAvIENvbmZpZy5tUGVyUHgpICogMi8zXVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJzdW40MVwiOiBzdW4sXG4gICAgICAgICAgICBcImVhcnRoIGFsb3JzXCI6IGVhcnRoLFxuICAgICAgICAgICAgXCJpbnRlcmxvcGVyXCI6IHtcbiAgICAgICAgICAgICAgICB4OiBzdW4ueCArICgxMDAuOTZlOSAvIENvbmZpZy5tUGVyUHgpLFxuICAgICAgICAgICAgICAgIHk6IHN1bi55ICsgMjAsXG4gICAgICAgICAgICAgICAgcmFkaXVzOiAyNCxcbiAgICAgICAgICAgICAgICBtYXNzOiAzLjk3MmUyNCxcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJyZWRcIixcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eTogWyhDb25maWcuZWFydGhTcGVlZCAvIENvbmZpZy5tUGVyUHgpICogMS8zLCAoQ29uZmlnLmVhcnRoU3BlZWQgLyBDb25maWcubVBlclB4KSAqIDIvM11cbiAgICAgICAgICAgIH1cbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==