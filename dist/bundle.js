!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o,i=function(){function t(t,e,n){this.context=t,this.camera=e,this.canvas=n}return t.prototype.draw=function(t){this.context.beginPath(),t.draw(this),this.context.stroke()},t.prototype.arc=function(t,e,n,o,i){return this.context.arc(this.camera.X(t),this.camera.Y(e),this.camera.zTransform(n),o,i),this},t.prototype.fill=function(t){return this.context.fillStyle=t,this.context.fill(),this},t}(),r=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.context=new i(this.canvas.getContext("2d"),n,this),this.entities=[]}return t.prototype.appendTo=function(t){t.appendChild(this.canvas)},t.prototype.update=function(t){var e=this;this.entities.forEach((function(n){n.update(t),n.draw(t,e.context)}))},t}(),c=function(){function t(t,e,n){this.coords=t,this.radius=e,this.color=n}return t.prototype.draw=function(t){t.arc(this.coords.x,this.coords.y,this.radius,0,2*Math.PI),t.fill(this.color)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),s=6.674*Math.pow(10,-11);!function(t){t[t.PLAY=0]="PLAY",t[t.PAUSE=1]="PAUSE"}(o||(o={}));o.PLAY;var a=7884e3,u=13e7,h=s,d=1,f=1.8,y=.1,p=25,l=1e4,v=1e4,m=.1,x=29780,b=function(t,e){var n=function(t,e){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))*u}(t.coords,e.coords);if(0!=n&&!Number.isNaN(n))return h*(t.mass*e.mass/(n*n))*d},w=function(t,e,n,o){return-(t-e)/(Math.abs(n.x-o.x)+Math.abs(n.y-o.y))},g=function(t,e,n,o){var i=b(e,n)/e.mass/u;t.accelerate(i*w(e.coords.x,n.coords.x,e.coords,n.coords),i*w(e.coords.y,n.coords.y,e.coords,n.coords),o)},z=function(){function t(t,e,n,o,i,r,s){this.id=t,this.coords=e,this.radius=n,this.mass=o,this.color=i,this.velocity=r,this.planets=s,this.entities=[],this.model=new c(this.coords,this.radius,this.color)}return t.prototype.getEntities=function(){return this.entities},t.prototype.update=function(t){for(var e in this.planets){var n=this.planets[e];n.id!=this.id&&g(this.velocity,this,n,t)}this.velocity.apply(this.coords,t),this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.draw(this.model)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),C=function(){function t(){this.entities=[]}return t.prototype.update=function(t){this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.context.clearRect(0,0,e.canvas.canvas.width,e.canvas.canvas.height),e.canvas.canvas.style.backgroundColor="#000000",this.entities.forEach((function(n){return n.draw(t,e)})),e.context.stroke()},t.prototype.getEntities=function(){return this.entities},t}(),P=function(){function t(t,e,n){this.x=0,this.y=0,this.z=1,this.x=t,this.y=e,this.z=n}return t.prototype.X=function(t){return this.zTransform(t-this.x)},t.prototype.Y=function(t){return this.zTransform(t-this.y)},t.prototype.zTransform=function(t){return t*(1/this.z)},t.prototype.relativeX=function(t){return this.x+t},t.prototype.relativeY=function(t){return this.y+t},t}(),E=function(){function t(t,e){var n=this;this.camera=t,this.canvas=e,this.actionByKeycode={82:function(){n.camera.x=0,n.camera.y=0,n.camera.z=1},90:function(){n.camera.z<=m||(n.camera.z-=y)},88:function(){n.camera.z+=y},37:function(){n.camera.x-p<=0||(n.camera.x-=p)},38:function(){n.camera.y-p<=0||(n.camera.y-=p)},39:function(){n.camera.x>=l||(n.camera.x+=p)},40:function(){n.camera.y>=v||(n.camera.y+=p)}}}return t.prototype.handleKeyboard=function(t){null!=this.actionByKeycode&&this.actionByKeycode[t.keyCode]&&this.actionByKeycode[t.keyCode]()},t}(),S=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.accelerate=function(t,e,n){this.x+=t*n,this.y+=e*n},t.prototype.apply=function(t,e){t.x+=this.x*e,t.y+=this.y*e},t}(),M=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.setCoordinates=function(t,e){this.x=t,this.y=e},t}(),T=function(t,e,n){n.context.context.font="30px Verdana",n.update(e/1e3*a),n.context.context.fillText("Hey Chuck! ðŸ¤˜",n.canvas.width/2-100,30),n.context.context.fillText("ðŸ¤˜ Clique moi dessus ðŸ¤˜",n.canvas.width/2-165,60),n.canvas.addEventListener("click",(function(t){document.querySelector("#audio").play()})),window.requestAnimationFrame((function(e){return T(e,e-t,n)}))};document.onreadystatechange=function(){if("complete"==document.readyState){var t=new P(l/2,v/2,f),e=new r(document.body.clientWidth,document.body.clientHeight,t);e.appendTo(document.body);var n=new C,o=new E(t,e),i=function(t,e){var n={x:e.relativeX(e.z*(t.canvas.width/2)),y:e.relativeY(e.z*(t.canvas.height/2)),radius:120,mass:1.9891e30,color:"orange",velocity:[0,0]};return{sun41:n,"earth alors":{x:n.x-14996e7/u,y:n.y,radius:30,mass:5972e21,color:"skyblue",velocity:[x/u*1/3,x/u*2/3]}}}(e,t),c=[];for(var s in document.querySelector("body").addEventListener("keydown",o.handleKeyboard.bind(o)),i){var a=i[s];c.push(new z(s,new M(a.x,a.y),a.radius,a.mass,a.color,new S(a.velocity[0],a.velocity[1]),c))}n.entities=c,e.entities.push(n),T(0,0,e)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9Db250ZXh0LnRzIiwid2VicGFjazovLy8uL3NyYy9Db25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9DYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVsL0Rpc2MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9HcmF2aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvR2VvbWV0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BsYW5ldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2NlbmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbWVyYS9DYW1lcmEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xzL0tleWJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvVmVsb2NpdHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9Db29yZGluYXRlcy50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9wbGFuZXRzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUGxheU1vZGUiLCJjb250ZXh0IiwiY2FtZXJhIiwiY2FudmFzIiwiZHJhdyIsIm1vZGVsIiwidGhpcyIsImJlZ2luUGF0aCIsInN0cm9rZSIsImFyYyIsIngiLCJ5IiwiYXMiLCJhZSIsIlgiLCJZIiwielRyYW5zZm9ybSIsImZpbGwiLCJjb2xvciIsImZpbGxTdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImVudGl0aWVzIiwiYXBwZW5kVG8iLCJlbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJ1cGRhdGUiLCJkZWx0YSIsImZvckVhY2giLCJlIiwiY29vcmRzIiwicmFkaXVzIiwiY3R4IiwiTWF0aCIsIlBJIiwiZ2V0Q29vcmRpbmF0ZXMiLCJzZXRDb29yZGluYXRlcyIsIkciLCJwb3ciLCJQTEFZIiwia21QZXJQeCIsImdldEZvcmNlIiwiYSIsImIiLCJkaXN0IiwiYWJzIiwiQ29uZmlnIiwiTnVtYmVyIiwiaXNOYU4iLCJtYXNzIiwiZ2V0Rm9yY2VSYXRpbyIsImRpckEiLCJkaXJCIiwiY29vcmRBIiwiY29vcmRCIiwidmVsb2NpdHkiLCJhY2MiLCJhY2NlbGVyYXRlIiwiaWQiLCJwbGFuZXRzIiwiZ2V0RW50aXRpZXMiLCJhcHBseSIsImNsZWFyUmVjdCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwieiIsInYiLCJyZWxhdGl2ZVgiLCJyZWxhdGl2ZVkiLCJhY3Rpb25CeUtleWNvZGUiLCI4MiIsIjkwIiwiODgiLCIzNyIsIjM4IiwiMzkiLCI0MCIsImhhbmRsZUtleWJvYXJkIiwiZXZlbnQiLCJ1bmRlZmluZWQiLCJrZXlDb2RlIiwib2JqIiwibWFpbiIsInQxIiwiYm9hcmQiLCJmb250IiwiZmlsbFRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInBsYXkiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiYm9keSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0Iiwic2NlbmUiLCJrZXli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Y2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgTW9kZWwgZnJvbSBcIi4uL01vZGVsL01vZGVsXCJcbmltcG9ydCBDYW1lcmEgZnJvbSBcIi4uL0NhbWVyYS9DYW1lcmFcIlxuaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9DYW52YXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHJlYWRvbmx5IGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgcmVhZG9ubHkgY2FtZXJhOiBDYW1lcmEsXG4gICAgICAgIHJlYWRvbmx5IGNhbnZhczogQ2FudmFzLFxuICAgICAgICApIHt9XG5cbiAgICBkcmF3KG1vZGVsOiBNb2RlbCkge1xuICAgICAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKClcbiAgICAgICAgbW9kZWwuZHJhdyh0aGlzKVxuICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKClcbiAgICB9XG5cbiAgICBhcmMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHI6IG51bWJlciwgYXM6IG51bWJlciwgYWU6IG51bWJlcik6IENvbnRleHQge1xuICAgICAgICB0aGlzLmNvbnRleHQuYXJjKHRoaXMuY2FtZXJhLlgoeCksIHRoaXMuY2FtZXJhLlkoeSksIHRoaXMuY2FtZXJhLnpUcmFuc2Zvcm0ociksIGFzLCBhZSlcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICBmaWxsKGNvbG9yOiBzdHJpbmcpOiBDb250ZXh0IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yXG4gICAgICAgIHRoaXMuY29udGV4dC5maWxsKClcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59XG5cbnR5cGUgRHJhd0Z1bmN0aW9uID0gKGN0eDogQ29udGV4dCkgPT4gdm9pZFxuXG5leHBvcnQge1xuICAgIERyYXdGdW5jdGlvblxufSIsImNvbnN0IGNEdXJhdGlvbiA9IDBcbmNvbnN0IGZwcyA9IDIwXG5jb25zdCBkcGYgPSAxIC8gZnBzICogMTAwMFxubGV0IHpvb21MZXZlbCA9IDEuOFxubGV0IHpvb21NaW4gPSAwLjFcbmNvbnN0IHpvb21BY3Rpb25Qb3cgPSAwLjEwXG5jb25zdCBkZWNhbEJ5TW92ZSA9IDI1XG5cbmxldCBtYXhQbGFuZXRzID0gNFxubGV0IHBsYW5ldHNSYWRpdXNEZWYgPSB7bWluOiAzLCBtYXg6IDcwfVxuY29uc3QgcGxhbmV0c01pbkRpc3QgPSAxMFxuY29uc3QgcGxhbmV0QmFzZVNwZWVkID0gNDBcblxuY29uc3Qgc3BhY2VXID0gMTAwMDBcbmNvbnN0IHNwYWNlSCA9IDEwMDAwXG5jb25zdCBkZWNhbFggPSBzcGFjZVcgLyAyXG5jb25zdCBkZWNhbFkgPSBzcGFjZUggLyAyXG5cbmNvbnN0IGdyYXZpdHlQdWxsQnlEZWx0YSA9IDFcbmNvbnN0IGRpc3RQb3cgPSA1XG5cbmNvbnN0IGZvbnRTaXplID0gMTRcbmxldCBkZWJ1ZyA9IG51bGxcbmNvbnN0IGVhcnRoU3BlZWQgPSAyOS43OCAqIDEwMDBcbmNvbnN0IEcgPSBNYXRoLnBvdygxMCwgLTExKSAqIDYuNjc0XG5cbmVudW0gUGxheU1vZGUge1xuICAgIFBMQVksXG4gICAgUEFVU0Vcbn1cblxuY29uc3QgbW9kZSA9IFBsYXlNb2RlLlBMQVlcbmNvbnN0IGttUGVyUHggPSAxLjNlNVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZ2FtZVNwZWVkOiAzNjUgKiAyNCAqIDYwICogMTUsXG4gICAgLy8gZ2FtZVNwZWVkOiAxMDAsXG4gICAga21QZXJQeCxcbiAgICBtUGVyUHg6IGttUGVyUHggKiAxMDAwLFxuICAgIGtnUGVyUHhEZW5zaXR5OiAxMjAwLFxuICAgIEcsXG4gICAgZ3Jhdml0eVB1bGxCeURlbHRhLFxuICAgIGNEdXJhdGlvbixcbiAgICBmcHMsXG4gICAgZHBmLFxuICAgIHpvb21MZXZlbCxcbiAgICB6b29tQWN0aW9uUG93LFxuICAgIGRlY2FsQnlNb3ZlLFxuICAgIG1heFBsYW5ldHMsXG4gICAgcGxhbmV0c1JhZGl1c0RlZixcbiAgICBwbGFuZXRzTWluRGlzdCxcbiAgICBwbGFuZXRCYXNlU3BlZWQsXG4gICAgc3BhY2VXLFxuICAgIHNwYWNlSCxcbiAgICBkZWNhbFgsXG4gICAgZGVjYWxZLFxuICAgIGRpc3RQb3csXG4gICAgZm9udFNpemUsXG4gICAgZGVidWcsXG4gICAgUGxheU1vZGUsXG4gICAgbW9kZSxcbiAgICB6b29tTWluLFxuICAgIGVhcnRoU3BlZWRcbn0iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuLi9FbnRpdHkvRW50aXR5XCJcbmltcG9ydCBDb250ZXh0IGZyb20gXCIuL0NvbnRleHRcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi4vQ2FtZXJhL0NhbWVyYVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gICAgcmVhZG9ubHkgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudFxuICAgIHJlYWRvbmx5IGNvbnRleHQ6IENvbnRleHRcbiAgICBwdWJsaWMgZW50aXRpZXM6IEVudGl0eVtdXG5cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgY2FtZXJhOiBDYW1lcmEpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGhcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG5ldyBDb250ZXh0KHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSwgY2FtZXJhLCB0aGlzKVxuICAgICAgICB0aGlzLmVudGl0aWVzID0gW11cbiAgICB9XG5cbiAgICBhcHBlbmRUbyhlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKVxuICAgIH1cblxuICAgIHVwZGF0ZShkZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgIGUudXBkYXRlKGRlbHRhKVxuICAgICAgICAgICAgZS5kcmF3KGRlbHRhLCB0aGlzLmNvbnRleHQpXG4gICAgICAgIH0pXG4gICAgfVxufSIsImltcG9ydCBDb250ZXh0IGZyb20gXCIuLi9DYW52YXMvQ29udGV4dFwiXG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4uL1BoeXNpYy9Db29yZGluYXRlc1wiXG5pbXBvcnQgTW9kZWwgZnJvbSBcIi4vTW9kZWxcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNjIGltcGxlbWVudHMgTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBjb29yZHM6IENvb3JkaW5hdGVzLCBwdWJsaWMgcmFkaXVzOiBudW1iZXIsIHB1YmxpYyBjb2xvcjogc3RyaW5nKSB7fVxuXG4gICAgZHJhdyhjdHg6IENvbnRleHQpIHtcbiAgICAgICAgY3R4LmFyYyh0aGlzLmNvb3Jkcy54LCB0aGlzLmNvb3Jkcy55LCB0aGlzLnJhZGl1cywgMCwgMiAqIE1hdGguUEkpXG4gICAgICAgIGN0eC5maWxsKHRoaXMuY29sb3IpXG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZXMoKTogQ29vcmRpbmF0ZXMge1xuICAgICAgICByZXR1cm4gdGhpcy5jb29yZHNcbiAgICB9XG5cbiAgICBzZXRDb29yZGluYXRlcyhjb29yZHM6IENvb3JkaW5hdGVzKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29vcmRzID0gY29vcmRzXG4gICAgfVxufSIsImltcG9ydCBWZWxvY2l0eSBmcm9tIFwiLi9WZWxvY2l0eVwiO1xuaW1wb3J0IFBsYW5ldCBmcm9tIFwiLi4vUGxhbmV0XCJcbmltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi9Db29yZGluYXRlc1wiXG5pbXBvcnQgKiBhcyBHZW9tZXRyeSBmcm9tIFwiLi9HZW9tZXRyeVwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuLi9Db25maWdcIlxuXG5jb25zdCBnZXRGb3JjZSA9IChhOiBQbGFuZXQsIGI6IFBsYW5ldCk6IG51bWJlciA9PiB7XG4gICAgY29uc3QgZGlzdCA9IEdlb21ldHJ5LmdldERpc3RhbmNlQmV0d2Vlbk9iamVjdHMoYS5jb29yZHMsIGIuY29vcmRzKVxuICAgIGlmIChkaXN0ID09IDAgfHwgTnVtYmVyLmlzTmFOKGRpc3QpKSB7XG4gICAgICAgIHJldHVybiBcbiAgICB9XG4gICAgY29uc3QgRiA9IENvbmZpZy5HICogKChhLm1hc3MqYi5tYXNzKS8oZGlzdCpkaXN0KSlcblxuICAgIHJldHVybiBGICogQ29uZmlnLmdyYXZpdHlQdWxsQnlEZWx0YVxufVxuXG5jb25zdCBnZXRGb3JjZVJhdGlvID0gKGRpckE6IG51bWJlciwgZGlyQjogbnVtYmVyLCBjb29yZEE6IENvb3JkaW5hdGVzLCBjb29yZEI6IENvb3JkaW5hdGVzKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gLShkaXJBIC0gZGlyQikgLyAoTWF0aC5hYnMoY29vcmRBLnggLSBjb29yZEIueCkgKyBNYXRoLmFicyhjb29yZEEueSAtIGNvb3JkQi55KSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgKHZlbG9jaXR5OiBWZWxvY2l0eSwgYTogUGxhbmV0LCBiOiBQbGFuZXQsIGRlbHRhOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBhY2MgPSAoZ2V0Rm9yY2UoYSwgYikgLyBhLm1hc3MpIC8gQ29uZmlnLm1QZXJQeFxuICAgIHZlbG9jaXR5LmFjY2VsZXJhdGUoXG4gICAgICAgIGFjYyAqIGdldEZvcmNlUmF0aW8oYS5jb29yZHMueCwgYi5jb29yZHMueCwgYS5jb29yZHMsIGIuY29vcmRzKSxcbiAgICAgICAgYWNjICogZ2V0Rm9yY2VSYXRpbyhhLmNvb3Jkcy55LCBiLmNvb3Jkcy55LCBhLmNvb3JkcywgYi5jb29yZHMpLFxuICAgICAgICBkZWx0YVxuICAgIClcbn0iLCJpbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4vQ29vcmRpbmF0ZXNcIlxuaW1wb3J0IENvbmZpZyBmcm9tIFwiLi4vQ29uZmlnXCJcblxuY29uc3QgZ2V0RGlzdGFuY2VCZXR3ZWVuT2JqZWN0cyA9IChhOiBDb29yZGluYXRlcywgYjogQ29vcmRpbmF0ZXMpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiAoTWF0aC5hYnMoYi54IC0gYS54KSArIE1hdGguYWJzKGIueSAtIGEueSkpICogQ29uZmlnLm1QZXJQeFxufVxuXG5leHBvcnQge1xuICAgIGdldERpc3RhbmNlQmV0d2Vlbk9iamVjdHNcbn0iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuL0VudGl0eS9FbnRpdHlcIlxuaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuL1BoeXNpYy9Db29yZGluYXRlc1wiXG5pbXBvcnQgQ29udGV4dCBmcm9tIFwiLi9DYW52YXMvQ29udGV4dFwiXG5pbXBvcnQgRGlzYyBmcm9tIFwiLi9Nb2RlbC9EaXNjXCJcbmltcG9ydCBWZWxvY2l0eSBmcm9tIFwiLi9QaHlzaWMvVmVsb2NpdHlcIlxuaW1wb3J0IGFwcGx5R3Jhdml0eSBmcm9tIFwiLi9QaHlzaWMvR3Jhdml0eVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYW5ldCBpbXBsZW1lbnRzIEVudGl0eSB7XG4gICAgcHVibGljIGVudGl0aWVzOiBFbnRpdHlbXSA9IFtdXG4gICAgcHVibGljIG1vZGVsOiBEaXNjXG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGlkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBjb29yZHM6IENvb3JkaW5hdGVzLFxuICAgICAgICByZWFkb25seSByYWRpdXM6IG51bWJlcixcbiAgICAgICAgcmVhZG9ubHkgbWFzczogbnVtYmVyLFxuICAgICAgICByZWFkb25seSBjb2xvcjogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgdmVsb2NpdHk6IFZlbG9jaXR5LFxuICAgICAgICByZWFkb25seSBwbGFuZXRzOiBQbGFuZXRbXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSBuZXcgRGlzYyh0aGlzLmNvb3JkcywgdGhpcy5yYWRpdXMsIHRoaXMuY29sb3IpXG4gICAgICAgIH1cblxuICAgIGdldEVudGl0aWVzKCk6IEVudGl0eVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXNcbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMucGxhbmV0cykge1xuICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMucGxhbmV0c1tpXVxuXG4gICAgICAgICAgICBpZiAocC5pZCA9PSB0aGlzLmlkKSB7XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwcGx5R3Jhdml0eSh0aGlzLnZlbG9jaXR5LCB0aGlzLCBwLCBkZWx0YSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZlbG9jaXR5LmFwcGx5KHRoaXMuY29vcmRzLCBkZWx0YSlcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pZCwgdGhpcy5jb29yZHMpXG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IGUudXBkYXRlKGRlbHRhKSlcbiAgICB9XG5cbiAgICBkcmF3KGRlbHRhOiBudW1iZXIsIGNvbnRleHQ6IENvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgY29udGV4dC5kcmF3KHRoaXMubW9kZWwpXG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZXMoKTogQ29vcmRpbmF0ZXMge1xuICAgICAgICByZXR1cm4gdGhpcy5jb29yZHNcbiAgICB9XG5cbiAgICBzZXRDb29yZGluYXRlcyhjb29yZHM6IENvb3JkaW5hdGVzKTogdm9pZCB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNvb3JkcylcbiAgICAgICAgdGhpcy5jb29yZHMgPSBjb29yZHNcbiAgICAgICAgLy8gdGhpcy5tb2RlbC5zZXRDb29yZGluYXRlcyh0aGlzLmNvb3JkcylcbiAgICB9XG59IiwiaW1wb3J0IEVudGl0eSBmcm9tIFwiLi4vRW50aXR5L0VudGl0eVwiXG5pbXBvcnQgQ29udGV4dCBmcm9tIFwiLi4vQ2FudmFzL0NvbnRleHRcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY2VuZSBpbXBsZW1lbnRzIEVudGl0eSB7XG4gICAgcHVibGljIGVudGl0aWVzOiBFbnRpdHlbXSA9IFtdXG5cbiAgICB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZSA9PiBlLnVwZGF0ZShkZWx0YSkpXG4gICAgfVxuXG4gICAgZHJhdyhkZWx0YTogbnVtYmVyLCBjb250ZXh0OiBDb250ZXh0KTogdm9pZCB7XG4gICAgICAgIGNvbnRleHQuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY29udGV4dC5jYW52YXMuY2FudmFzLndpZHRoLCBjb250ZXh0LmNhbnZhcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5jYW52YXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzAwMDAwMFwiXG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IGUuZHJhdyhkZWx0YSwgY29udGV4dCkpXG4gICAgICAgIGNvbnRleHQuY29udGV4dC5zdHJva2UoKTsgICAgXG4gICAgfVxuXG4gICAgZ2V0RW50aXRpZXMoKTogRW50aXR5W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGllc1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmEge1xuICAgIHB1YmxpYyB4OiBudW1iZXIgPSAwXG4gICAgcHVibGljIHk6IG51bWJlciA9IDBcbiAgICBwdWJsaWMgejogbnVtYmVyID0gMVxuXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgICAgICB0aGlzLnggPSB4XG4gICAgICAgIHRoaXMueSA9IHlcbiAgICAgICAgdGhpcy56ID0gelxuICAgIH1cblxuICAgIFgoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuelRyYW5zZm9ybSh4IC0gdGhpcy54KVxuICAgIH1cblxuICAgIFkoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuelRyYW5zZm9ybSh5IC0gdGhpcy55KVxuICAgIH1cblxuICAgIHpUcmFuc2Zvcm0odjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHYgKiAoMSAvIHRoaXMueilcbiAgICB9XG5cbiAgICByZWxhdGl2ZVgoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCArIHhcbiAgICB9XG5cbiAgICByZWxhdGl2ZVkoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueSArIHlcbiAgICB9XG59IiwiaW1wb3J0IENhbWVyYSBmcm9tIFwiLi4vQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuLi9Db25maWdcIlxuaW1wb3J0IENhbnZhcyBmcm9tIFwiLi4vQ2FudmFzL0NhbnZhc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtleWJvYXJkIHtcbiAgICBwdWJsaWMgYWN0aW9uQnlLZXljb2RlOiB7W2tleTogbnVtYmVyXTogRnVuY3Rpb259XG5cbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBjYW1lcmE6IENhbWVyYSwgcmVhZG9ubHkgY2FudmFzOiBDYW52YXMpIHtcbiAgICAgICAgdGhpcy5hY3Rpb25CeUtleWNvZGUgPSB7XG4gICAgICAgICAgICAvLyA2ODogKCkgPT4ge2RlYnVnLlRvZ2dsZSgpO30sXG4gICAgICAgICAgICAvLyA4MzogKCkgPT4ge21vZGUgPSBtb2RlID09IFBBVVNFID8gUExBWSA6IFBBVVNFO30sXG4gICAgICAgICAgICA4MjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnggPSAwXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueSA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS56ID0gMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDkwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnogPD0gQ29uZmlnLnpvb21NaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnogLT0gQ29uZmlnLnpvb21BY3Rpb25Qb3dcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA4ODogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnogKz0gQ29uZmlnLnpvb21BY3Rpb25Qb3dcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAzNzogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS54IC0gQ29uZmlnLmRlY2FsQnlNb3ZlIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS54IC09IENvbmZpZy5kZWNhbEJ5TW92ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDM4OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnkgLSBDb25maWcuZGVjYWxCeU1vdmUgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnkgLT0gQ29uZmlnLmRlY2FsQnlNb3ZlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMzk6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueCA+PSBDb25maWcuc3BhY2VXKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueCArPSBDb25maWcuZGVjYWxCeU1vdmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA0MDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS55ID49IENvbmZpZy5zcGFjZUgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS55ICs9IENvbmZpZy5kZWNhbEJ5TW92ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5Ym9hcmQoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uQnlLZXljb2RlID09IHVuZGVmaW5lZCB8fCBcbiAgICAgICAgICAgICF0aGlzLmFjdGlvbkJ5S2V5Y29kZVtldmVudC5rZXlDb2RlXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9uQnlLZXljb2RlW2V2ZW50LmtleUNvZGVdKCk7XG4gICAgfVxufSIsImltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi9Db29yZGluYXRlc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlbG9jaXR5IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyKSB7fVxuXG4gICAgYWNjZWxlcmF0ZSh4OiBudW1iZXIsIHk6IG51bWJlciwgZGVsdGE6IG51bWJlcikge1xuICAgICAgICB0aGlzLnggKz0geCAqIGRlbHRhXG4gICAgICAgIHRoaXMueSArPSB5ICogZGVsdGFcbiAgICB9XG5cbiAgICBhcHBseShvYmo6IENvb3JkaW5hdGVzLCBkZWx0YTogbnVtYmVyKSB7XG4gICAgICAgIG9iai54ICs9IHRoaXMueCAqIGRlbHRhXG4gICAgICAgIG9iai55ICs9IHRoaXMueSAqIGRlbHRhXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb3JkaW5hdGVzIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyKSB7fVxuXG4gICAgc2V0Q29vcmRpbmF0ZXMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy54ID0geFxuICAgICAgICB0aGlzLnkgPSB5XG4gICAgfVxufSIsImltcG9ydCBDYW52YXMgZnJvbSBcIi4vc3JjL0NhbnZhcy9DYW52YXNcIlxuaW1wb3J0IFBsYW5ldCBmcm9tIFwiLi9zcmMvUGxhbmV0XCJcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi9zcmMvU2NlbmUvaW5kZXhcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi9zcmMvQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgS2V5Ym9hcmQgZnJvbSBcIi4vc3JjL0NvbnRyb2xzL0tleWJvYXJkXCJcbmltcG9ydCBDb25maWcgZnJvbSBcIi4vc3JjL0NvbmZpZ1wiXG5pbXBvcnQgVmVsb2NpdHkgZnJvbSBcIi4vc3JjL1BoeXNpYy9WZWxvY2l0eVwiXG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4vc3JjL1BoeXNpYy9Db29yZGluYXRlc1wiXG5cbmltcG9ydCBnZXRQbGFuZXRzIGZyb20gXCIuL3BsYW5ldHNcIlxuXG5sZXQgY1RpbWUgPSAwXG5cbmNvbnN0IG1haW4gPSAodDE6IG51bWJlciwgZGVsdGE6IG51bWJlciwgYm9hcmQ6IENhbnZhcykgPT4ge1xuICAgIC8vIGNUaW1lICs9IGRlbHRhXG4gICAgLy8gaWYgKGNUaW1lID4gQ29uZmlnLmRwZikge1xuICAgICAgICBib2FyZC5jb250ZXh0LmNvbnRleHQuZm9udCA9IFwiMzBweCBWZXJkYW5hXCI7XG4gICAgICAgIGJvYXJkLnVwZGF0ZSgoZGVsdGEgLyAxMDAwKSAqIENvbmZpZy5nYW1lU3BlZWQpXG4gICAgICAgIGJvYXJkLmNvbnRleHQuY29udGV4dC5maWxsVGV4dChcIkhleSBDaHVjayEg8J+kmFwiLCBib2FyZC5jYW52YXMud2lkdGggLyAyIC0gMTAwLCAzMCk7XG4gICAgICAgIGJvYXJkLmNvbnRleHQuY29udGV4dC5maWxsVGV4dChcIvCfpJggQ2xpcXVlIG1vaSBkZXNzdXMg8J+kmFwiLCBib2FyZC5jYW52YXMud2lkdGggLyAyIC0gMTY1LCA2MCk7XG4gICAgICAgIGJvYXJkLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50ICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXVkaW9cIilcbiAgICAgICAgICAgIGF1ZGlvLnBsYXkoKVxuICAgICAgICB9KVxuICAgICAgICAvLyBjVGltZSAtPSBDb25maWcuZHBmXG4gICAgLy8gfVxuXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0ID0+IG1haW4odCwgdCAtIHQxLCBib2FyZCkpXG59XG5cbmRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBDYW1lcmEoQ29uZmlnLnNwYWNlVyAvIDIsIENvbmZpZy5zcGFjZUggLyAyLCBDb25maWcuem9vbUxldmVsKVxuICAgIGNvbnN0IGJvYXJkID0gbmV3IENhbnZhcyhkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCwgY2FtZXJhKVxuICAgIGJvYXJkLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpXG4gICAgXG4gICAgY29uc3Qgc2NlbmUgPSBuZXcgU2NlbmUoKVxuICAgIGNvbnN0IGtleWJvYXJkQ29udHJvbHMgPSBuZXcgS2V5Ym9hcmQoY2FtZXJhLCBib2FyZClcbiAgICBjb25zdCBwbGFuZXRzQ29uZmlnID0gZ2V0UGxhbmV0cyhib2FyZCwgY2FtZXJhKVxuICAgIGxldCBwbGFuZXRzOiBQbGFuZXRbXSA9IFtdXG5cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGtleWJvYXJkQ29udHJvbHMuaGFuZGxlS2V5Ym9hcmQuYmluZChrZXlib2FyZENvbnRyb2xzKSk7XG4gICAgXG4gICAgZm9yIChsZXQgaSBpbiBwbGFuZXRzQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwbGFuZXRzQ29uZmlnW2ldXG4gICAgICAgIHBsYW5ldHMucHVzaChuZXcgUGxhbmV0KGksXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZXMocC54LCBwLnkpLFxuICAgICAgICAgICAgcC5yYWRpdXMsXG4gICAgICAgICAgICBwLm1hc3MsXG4gICAgICAgICAgICBwLmNvbG9yLFxuICAgICAgICAgICAgbmV3IFZlbG9jaXR5KHAudmVsb2NpdHlbMF0sIHAudmVsb2NpdHlbMV0pLFxuICAgICAgICAgICAgcGxhbmV0c1xuICAgICAgICAgICAgKSlcbiAgICB9XG5cbiAgICBzY2VuZS5lbnRpdGllcyA9IHBsYW5ldHNcbiAgICBib2FyZC5lbnRpdGllcy5wdXNoKHNjZW5lKVxuICAgIFxuICAgIG1haW4oMCwgMCwgYm9hcmQpXG4gfSIsImltcG9ydCBDYW52YXMgZnJvbSBcIi4vc3JjL0NhbnZhcy9DYW52YXNcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi9zcmMvQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuL3NyYy9Db25maWdcIlxuXG5leHBvcnQgZGVmYXVsdCAoY2FudmFzOiBDYW52YXMsIGNhbWVyYTogQ2FtZXJhKToge1trZXk6IHN0cmluZ106IGFueX0gPT4ge1xuICAgIGNvbnN0IHN1biA9IHtcbiAgICAgICAgeDogY2FtZXJhLnJlbGF0aXZlWChjYW1lcmEueiAqIChjYW52YXMuY2FudmFzLndpZHRoIC8gMikpLFxuICAgICAgICB5OiBjYW1lcmEucmVsYXRpdmVZKGNhbWVyYS56ICogKGNhbnZhcy5jYW52YXMuaGVpZ2h0IC8gMikpLFxuICAgICAgICByYWRpdXM6IDEyMCxcbiAgICAgICAgbWFzczogMS45ODkxZTMwLFxuICAgICAgICBjb2xvcjogXCJvcmFuZ2VcIixcbiAgICAgICAgdmVsb2NpdHk6IFswLCAwXVxuICAgIH1cbiAgICBjb25zdCBlYXJ0aCA9IHtcbiAgICAgICAgeDogc3VuLnggLSAoMTQ5Ljk2ZTkgLyBDb25maWcubVBlclB4KSxcbiAgICAgICAgeTogc3VuLnksXG4gICAgICAgIHJhZGl1czogMzAsXG4gICAgICAgIG1hc3M6IDUuOTcyZTI0LFxuICAgICAgICBjb2xvcjogXCJza3libHVlXCIsXG4gICAgICAgIHZlbG9jaXR5OiBbKENvbmZpZy5lYXJ0aFNwZWVkIC8gQ29uZmlnLm1QZXJQeCkgKiAxLzMsIChDb25maWcuZWFydGhTcGVlZCAvIENvbmZpZy5tUGVyUHgpICogMi8zXVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJzdW40MVwiOiBzdW4sXG4gICAgICAgICAgICBcImVhcnRoIGFsb3JzXCI6IGVhcnRoXG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=