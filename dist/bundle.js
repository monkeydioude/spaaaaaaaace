!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o,i=function(){function t(t,e,n){this.context=t,this.camera=e,this.canvas=n}return t.prototype.draw=function(t){this.context.beginPath(),t.draw(this),this.context.stroke()},t.prototype.arc=function(t,e,n,o,i){return this.context.arc(this.camera.X(t),this.camera.Y(e),this.camera.zTransform(n),o,i),this},t.prototype.fill=function(t){return this.context.fillStyle=t,this.context.fill(),this},t}(),r=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.context=new i(this.canvas.getContext("2d"),n,this),this.entities=[]}return t.prototype.appendTo=function(t){t.appendChild(this.canvas)},t.prototype.update=function(t){var e=this;this.entities.forEach((function(n){n.update(t),n.draw(t,e.context)}))},t}(),c=function(){function t(t,e,n){this.coords=t,this.radius=e,this.color=n}return t.prototype.draw=function(t){t.arc(this.coords.x,this.coords.y,this.radius,0,2*Math.PI),t.fill(this.color)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),s=6.674*Math.pow(10,-11);!function(t){t[t.PLAY=0]="PLAY",t[t.PAUSE=1]="PAUSE"}(o||(o={}));o.PLAY;var a=7884e3,u=18e7,h=s,d=1,f=2.5,y=.1,p=25,l=1e4,v=1e4,m=.1,x=29780,b=function(t,e){var n=function(t,e){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))*u}(t.coords,e.coords);if(0!=n&&!Number.isNaN(n))return h*(t.mass*e.mass/(n*n))*d},w=function(t,e,n,o){return-(t-e)/(Math.abs(n.x-o.x)+Math.abs(n.y-o.y))},g=function(t,e,n,o){var i=b(e,n)/e.mass/u;t.accelerate(i*w(e.coords.x,n.coords.x,e.coords,n.coords),i*w(e.coords.y,n.coords.y,e.coords,n.coords),o)},z=function(){function t(t,e,n,o,i,r,s){this.id=t,this.coords=e,this.radius=n,this.mass=o,this.color=i,this.velocity=r,this.planets=s,this.entities=[],this.model=new c(this.coords,this.radius,this.color)}return t.prototype.getEntities=function(){return this.entities},t.prototype.update=function(t){for(var e in this.planets){var n=this.planets[e];n.id!=this.id&&g(this.velocity,this,n,t)}this.velocity.apply(this.coords,t),this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.draw(this.model)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),C=function(){function t(){this.entities=[]}return t.prototype.update=function(t){this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.context.clearRect(0,0,e.canvas.canvas.width,e.canvas.canvas.height),e.canvas.canvas.style.backgroundColor="#000000",this.entities.forEach((function(n){return n.draw(t,e)})),e.context.stroke()},t.prototype.getEntities=function(){return this.entities},t}(),P=function(){function t(t,e,n){this.x=0,this.y=0,this.z=1,this.x=t,this.y=e,this.z=n}return t.prototype.X=function(t){return this.zTransform(t-this.x)},t.prototype.Y=function(t){return this.zTransform(t-this.y)},t.prototype.zTransform=function(t){return t*(1/this.z)},t.prototype.relativeX=function(t){return this.x+t},t.prototype.relativeY=function(t){return this.y+t},t}(),E=function(){function t(t,e){var n=this;this.camera=t,this.canvas=e,this.actionByKeycode={82:function(){n.camera.x=0,n.camera.y=0,n.camera.z=1},90:function(){n.camera.z<=m||(n.camera.z-=y)},88:function(){n.camera.z+=y},37:function(){n.camera.x-p<=0||(n.camera.x-=p)},38:function(){n.camera.y-p<=0||(n.camera.y-=p)},39:function(){n.camera.x>=l||(n.camera.x+=p)},40:function(){n.camera.y>=v||(n.camera.y+=p)}}}return t.prototype.handleKeyboard=function(t){null!=this.actionByKeycode&&this.actionByKeycode[t.keyCode]&&this.actionByKeycode[t.keyCode]()},t}(),S=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.accelerate=function(t,e,n){this.x+=t*n,this.y+=e*n},t.prototype.apply=function(t,e){t.x+=this.x*e,t.y+=this.y*e},t}(),M=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.setCoordinates=function(t,e){this.x=t,this.y=e},t}(),T=function(t,e,n){n.context.context.font="30px Verdana",n.update(e/1e3*a),n.context.context.fillText("Hey Chuck! ðŸ¤˜",n.canvas.width/2-100,30),n.context.context.fillText("ðŸ¤˜ Clique moi dessus ðŸ¤˜",n.canvas.width/2-165,60),n.canvas.addEventListener("click",(function(t){document.querySelector("#audio").play()})),window.requestAnimationFrame((function(e){return T(e,e-t,n)}))};document.onreadystatechange=function(){if("complete"==document.readyState){var t=new P(l/2,v/2,f),e=new r(document.body.clientWidth,document.body.clientHeight,t);e.appendTo(document.body);var n=new C,o=new E(t,e),i=function(t,e){var n={x:e.relativeX(e.z*(t.canvas.width/2)),y:e.relativeY(e.z*(t.canvas.height/2)),radius:120,mass:1.9891e30,color:"orange",velocity:[0,0]};return{sun41:n,"earth alors":{x:n.x-14996e7/u,y:n.y,radius:30,mass:5972e21,color:"skyblue",velocity:[x/u*1/3,x/u*2/3]}}}(e,t),c=[];for(var s in document.querySelector("body").addEventListener("keydown",o.handleKeyboard.bind(o)),i){var a=i[s];c.push(new z(s,new M(a.x,a.y),a.radius,a.mass,a.color,new S(a.velocity[0],a.velocity[1]),c))}n.entities=c,e.entities.push(n),T(0,0,e)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9Db250ZXh0LnRzIiwid2VicGFjazovLy8uL3NyYy9Db25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9DYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVsL0Rpc2MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9HcmF2aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvR2VvbWV0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BsYW5ldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2NlbmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbWVyYS9DYW1lcmEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xzL0tleWJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvVmVsb2NpdHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9Db29yZGluYXRlcy50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9wbGFuZXRzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUGxheU1vZGUiLCJjb250ZXh0IiwiY2FtZXJhIiwiY2FudmFzIiwiZHJhdyIsIm1vZGVsIiwidGhpcyIsImJlZ2luUGF0aCIsInN0cm9rZSIsImFyYyIsIngiLCJ5IiwiYXMiLCJhZSIsIlgiLCJZIiwielRyYW5zZm9ybSIsImZpbGwiLCJjb2xvciIsImZpbGxTdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImVudGl0aWVzIiwiYXBwZW5kVG8iLCJlbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJ1cGRhdGUiLCJkZWx0YSIsImZvckVhY2giLCJlIiwiY29vcmRzIiwicmFkaXVzIiwiY3R4IiwiTWF0aCIsIlBJIiwiZ2V0Q29vcmRpbmF0ZXMiLCJzZXRDb29yZGluYXRlcyIsIkciLCJwb3ciLCJQTEFZIiwia21QZXJQeCIsImdldEZvcmNlIiwiYSIsImIiLCJkaXN0IiwiYWJzIiwiQ29uZmlnIiwiTnVtYmVyIiwiaXNOYU4iLCJtYXNzIiwiZ2V0Rm9yY2VSYXRpbyIsImRpckEiLCJkaXJCIiwiY29vcmRBIiwiY29vcmRCIiwidmVsb2NpdHkiLCJhY2MiLCJhY2NlbGVyYXRlIiwiaWQiLCJwbGFuZXRzIiwiZ2V0RW50aXRpZXMiLCJhcHBseSIsImNsZWFyUmVjdCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwieiIsInYiLCJyZWxhdGl2ZVgiLCJyZWxhdGl2ZVkiLCJhY3Rpb25CeUtleWNvZGUiLCI4MiIsIjkwIiwiODgiLCIzNyIsIjM4IiwiMzkiLCI0MCIsImhhbmRsZUtleWJvYXJkIiwiZXZlbnQiLCJ1bmRlZmluZWQiLCJrZXlDb2RlIiwib2JqIiwibWFpbiIsInQxIiwiYm9hcmQiLCJmb250IiwiZmlsbFRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInBsYXkiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiYm9keSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0Iiwic2NlbmUiLCJrZXlib2FyZENvbnRyb2xzIiwicGxhbmV0c0NvbmZpZyIsInN1biIsInB1c2giXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksR0FJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEcsc0NDOUVyRCxJQ3NCS0MsRSxFRHRCTCxXQUNJLFdBQ2FDLEVBQ0FDLEVBQ0FDLEdBRkEsS0FBQUYsVUFDQSxLQUFBQyxTQUNBLEtBQUFDLFNBbUJqQixPQWhCSSxZQUFBQyxLQUFBLFNBQUtDLEdBQ0RDLEtBQUtMLFFBQVFNLFlBQ2JGLEVBQU1ELEtBQUtFLE1BQ1hBLEtBQUtMLFFBQVFPLFVBR2pCLFlBQUFDLElBQUEsU0FBSUMsRUFBV0MsRUFBVzdCLEVBQVc4QixFQUFZQyxHQUU3QyxPQURBUCxLQUFLTCxRQUFRUSxJQUFJSCxLQUFLSixPQUFPWSxFQUFFSixHQUFJSixLQUFLSixPQUFPYSxFQUFFSixHQUFJTCxLQUFLSixPQUFPYyxXQUFXbEMsR0FBSThCLEVBQUlDLEdBQzdFUCxNQUdYLFlBQUFXLEtBQUEsU0FBS0MsR0FHRCxPQUZBWixLQUFLTCxRQUFRa0IsVUFBWUQsRUFDekJaLEtBQUtMLFFBQVFnQixPQUNOWCxNQUVmLEVBdkJBLEcsRUVBQSxXQUtJLFdBQVljLEVBQWVDLEVBQWdCbkIsR0FDdkNJLEtBQUtILE9BQVNtQixTQUFTQyxjQUFjLFVBQ3JDakIsS0FBS0gsT0FBT2lCLE1BQVFBLEVBQ3BCZCxLQUFLSCxPQUFPa0IsT0FBU0EsRUFDckJmLEtBQUtMLFFBQVUsSUFBSSxFQUFRSyxLQUFLSCxPQUFPcUIsV0FBVyxNQUFPdEIsRUFBUUksTUFDakVBLEtBQUttQixTQUFXLEdBYXhCLE9BVkksWUFBQUMsU0FBQSxTQUFTQyxHQUNMQSxFQUFRQyxZQUFZdEIsS0FBS0gsU0FHN0IsWUFBQTBCLE9BQUEsU0FBT0MsR0FBUCxXQUNJeEIsS0FBS21CLFNBQVNNLFNBQVEsU0FBQUMsR0FDbEJBLEVBQUVILE9BQU9DLEdBQ1RFLEVBQUU1QixLQUFLMEIsRUFBTyxFQUFLN0IsYUFHL0IsRUF2QkEsRyxFQ0FBLFdBQ0ksV0FBbUJnQyxFQUE0QkMsRUFBdUJoQixHQUFuRCxLQUFBZSxTQUE0QixLQUFBQyxTQUF1QixLQUFBaEIsUUFjMUUsT0FaSSxZQUFBZCxLQUFBLFNBQUsrQixHQUNEQSxFQUFJMUIsSUFBSUgsS0FBSzJCLE9BQU92QixFQUFHSixLQUFLMkIsT0FBT3RCLEVBQUdMLEtBQUs0QixPQUFRLEVBQUcsRUFBSUUsS0FBS0MsSUFDL0RGLEVBQUlsQixLQUFLWCxLQUFLWSxRQUdsQixZQUFBb0IsZUFBQSxXQUNJLE9BQU9oQyxLQUFLMkIsUUFHaEIsWUFBQU0sZUFBQSxTQUFlTixHQUNYM0IsS0FBSzJCLE9BQVNBLEdBRXRCLEVBZkEsR0ZvQk1PLEVBQXdCLE1BQXBCSixLQUFLSyxJQUFJLElBQUssS0FFeEIsU0FBS3pDLEdBQ0QsbUJBQ0EscUJBRkosQ0FBS0EsTUFBUSxLQUtBQSxFQUFTMEMsS0FBdEIsSUFJZSxFQUNBLE9BREEsRUFJSEMsS0FKRyxFQU1WLEVBTlUsRUFqQlksRUFpQlosRUFoQ0MsSUFnQ0QsRUE5Qk8sR0E4QlAsRUE3QkssR0E2QkwsRUF0QkEsSUFzQkEsRUFyQkEsSUFxQkEsRUEvQkQsR0ErQkMsRUFaSSxNR2pCYkMsRUFBVyxTQUFDQyxFQUFXQyxHQUN6QixJQUFNQyxFQ0p3QixTQUFDRixFQUFnQkMsR0FDL0MsT0FBUVYsS0FBS1ksSUFBSUYsRUFBRXBDLEVBQUltQyxFQUFFbkMsR0FBSzBCLEtBQUtZLElBQUlGLEVBQUVuQyxFQUFJa0MsRUFBRWxDLElBQU1zQyxFREd4QyxDQUFtQ0osRUFBRVosT0FBUWEsRUFBRWIsUUFDNUQsR0FBWSxHQUFSYyxJQUFhRyxPQUFPQyxNQUFNSixHQUs5QixPQUZVRSxHQUFhSixFQUFFTyxLQUFLTixFQUFFTSxNQUFPTCxFQUFLQSxJQUVqQ0UsR0FHVEksRUFBZ0IsU0FBQ0MsRUFBY0MsRUFBY0MsRUFBcUJDLEdBQ3BFLFFBQVNILEVBQU9DLElBQVNuQixLQUFLWSxJQUFJUSxFQUFPOUMsRUFBSStDLEVBQU8vQyxHQUFLMEIsS0FBS1ksSUFBSVEsRUFBTzdDLEVBQUk4QyxFQUFPOUMsS0FHekUsV0FBQytDLEVBQW9CYixFQUFXQyxFQUFXaEIsR0FDdEQsSUFBTTZCLEVBQU9mLEVBQVNDLEVBQUdDLEdBQUtELEVBQUVPLEtBQVFILEVBQ3hDUyxFQUFTRSxXQUNMRCxFQUFNTixFQUFjUixFQUFFWixPQUFPdkIsRUFBR29DLEVBQUViLE9BQU92QixFQUFHbUMsRUFBRVosT0FBUWEsRUFBRWIsUUFDeEQwQixFQUFNTixFQUFjUixFQUFFWixPQUFPdEIsRUFBR21DLEVBQUViLE9BQU90QixFQUFHa0MsRUFBRVosT0FBUWEsRUFBRWIsUUFDeERILEksRUVsQlIsV0FJSSxXQUNXK0IsRUFDQTVCLEVBQ0VDLEVBQ0FrQixFQUNBbEMsRUFDRndDLEVBQ0VJLEdBTkYsS0FBQUQsS0FDQSxLQUFBNUIsU0FDRSxLQUFBQyxTQUNBLEtBQUFrQixPQUNBLEtBQUFsQyxRQUNGLEtBQUF3QyxXQUNFLEtBQUFJLFVBVk4sS0FBQXJDLFNBQXFCLEdBWXBCbkIsS0FBS0QsTUFBUSxJQUFJLEVBQUtDLEtBQUsyQixPQUFRM0IsS0FBSzRCLE9BQVE1QixLQUFLWSxPQWtDakUsT0EvQkksWUFBQTZDLFlBQUEsV0FDSSxPQUFPekQsS0FBS21CLFVBR2hCLFlBQUFJLE9BQUEsU0FBT0MsR0FDSCxJQUFLLElBQUk5RCxLQUFLc0MsS0FBS3dELFFBQVMsQ0FDeEIsSUFBTWhFLEVBQUlRLEtBQUt3RCxRQUFROUYsR0FFbkI4QixFQUFFK0QsSUFBTXZELEtBQUt1RCxJQUdqQixFQUFhdkQsS0FBS29ELFNBQVVwRCxLQUFNUixFQUFHZ0MsR0FFekN4QixLQUFLb0QsU0FBU00sTUFBTTFELEtBQUsyQixPQUFRSCxHQUVqQ3hCLEtBQUttQixTQUFTTSxTQUFRLFNBQUFDLEdBQUssT0FBQUEsRUFBRUgsT0FBT0MsT0FHeEMsWUFBQTFCLEtBQUEsU0FBSzBCLEVBQWU3QixHQUNoQkEsRUFBUUcsS0FBS0UsS0FBS0QsUUFHdEIsWUFBQWlDLGVBQUEsV0FDSSxPQUFPaEMsS0FBSzJCLFFBR2hCLFlBQUFNLGVBQUEsU0FBZU4sR0FFWDNCLEtBQUsyQixPQUFTQSxHQUd0QixFQS9DQSxHLEVDSkEsd0JBQ1csS0FBQVIsU0FBcUIsR0FnQmhDLE9BZEksWUFBQUksT0FBQSxTQUFPQyxHQUNIeEIsS0FBS21CLFNBQVNNLFNBQVEsU0FBQUMsR0FBSyxPQUFBQSxFQUFFSCxPQUFPQyxPQUd4QyxZQUFBMUIsS0FBQSxTQUFLMEIsRUFBZTdCLEdBQ2hCQSxFQUFRQSxRQUFRZ0UsVUFBVSxFQUFHLEVBQUdoRSxFQUFRRSxPQUFPQSxPQUFPaUIsTUFBT25CLEVBQVFFLE9BQU9BLE9BQU9rQixRQUNuRnBCLEVBQVFFLE9BQU9BLE9BQU8rRCxNQUFNQyxnQkFBa0IsVUFDOUM3RCxLQUFLbUIsU0FBU00sU0FBUSxTQUFBQyxHQUFLLE9BQUFBLEVBQUU1QixLQUFLMEIsRUFBTzdCLE1BQ3pDQSxFQUFRQSxRQUFRTyxVQUdwQixZQUFBdUQsWUFBQSxXQUNJLE9BQU96RCxLQUFLbUIsVUFFcEIsRUFqQkEsRyxFQ0hBLFdBS0ksV0FBWWYsRUFBV0MsRUFBV3lELEdBSjNCLEtBQUExRCxFQUFZLEVBQ1osS0FBQUMsRUFBWSxFQUNaLEtBQUF5RCxFQUFZLEVBR2Y5RCxLQUFLSSxFQUFJQSxFQUNUSixLQUFLSyxFQUFJQSxFQUNUTCxLQUFLOEQsRUFBSUEsRUFzQmpCLE9BbkJJLFlBQUF0RCxFQUFBLFNBQUVKLEdBQ0UsT0FBT0osS0FBS1UsV0FBV04sRUFBSUosS0FBS0ksSUFHcEMsWUFBQUssRUFBQSxTQUFFSixHQUNFLE9BQU9MLEtBQUtVLFdBQVdMLEVBQUlMLEtBQUtLLElBR3BDLFlBQUFLLFdBQUEsU0FBV3FELEdBQ1AsT0FBT0EsR0FBSyxFQUFJL0QsS0FBSzhELElBR3pCLFlBQUFFLFVBQUEsU0FBVTVELEdBQ04sT0FBT0osS0FBS0ksRUFBSUEsR0FHcEIsWUFBQTZELFVBQUEsU0FBVTVELEdBQ04sT0FBT0wsS0FBS0ssRUFBSUEsR0FFeEIsRUE5QkEsRyxFQ0lBLFdBR0ksV0FBcUJULEVBQXlCQyxHQUE5QyxXQUFxQixLQUFBRCxTQUF5QixLQUFBQyxTQUMxQ0csS0FBS2tFLGdCQUFrQixDQUduQkMsR0FBSSxXQUNBLEVBQUt2RSxPQUFPUSxFQUFJLEVBQ2hCLEVBQUtSLE9BQU9TLEVBQUksRUFDaEIsRUFBS1QsT0FBT2tFLEVBQUksR0FFcEJNLEdBQUksV0FDSSxFQUFLeEUsT0FBT2tFLEdBQUtuQixJQUdyQixFQUFLL0MsT0FBT2tFLEdBQUtuQixJQUVyQjBCLEdBQUksV0FDQSxFQUFLekUsT0FBT2tFLEdBQUtuQixHQUVyQjJCLEdBQUksV0FDSSxFQUFLMUUsT0FBT1EsRUFBSXVDLEdBQXNCLElBRzFDLEVBQUsvQyxPQUFPUSxHQUFLdUMsSUFFckI0QixHQUFJLFdBQ0ksRUFBSzNFLE9BQU9TLEVBQUlzQyxHQUFzQixJQUcxQyxFQUFLL0MsT0FBT1MsR0FBS3NDLElBRXJCNkIsR0FBSSxXQUNJLEVBQUs1RSxPQUFPUSxHQUFLdUMsSUFHckIsRUFBSy9DLE9BQU9RLEdBQUt1QyxJQUVyQjhCLEdBQUksV0FDSSxFQUFLN0UsT0FBT1MsR0FBS3NDLElBR3JCLEVBQUsvQyxPQUFPUyxHQUFLc0MsS0FZakMsT0FQSSxZQUFBK0IsZUFBQSxTQUFlQyxHQUNpQkMsTUFBeEI1RSxLQUFLa0UsaUJBQ0psRSxLQUFLa0UsZ0JBQWdCUyxFQUFNRSxVQUdoQzdFLEtBQUtrRSxnQkFBZ0JTLEVBQU1FLFlBRW5DLEVBdkRBLEcsRUNGQSxXQUNJLFdBQW1CekUsRUFBa0JDLEdBQWxCLEtBQUFELElBQWtCLEtBQUFDLElBV3pDLE9BVEksWUFBQWlELFdBQUEsU0FBV2xELEVBQVdDLEVBQVdtQixHQUM3QnhCLEtBQUtJLEdBQUtBLEVBQUlvQixFQUNkeEIsS0FBS0ssR0FBS0EsRUFBSW1CLEdBR2xCLFlBQUFrQyxNQUFBLFNBQU1vQixFQUFrQnRELEdBQ3BCc0QsRUFBSTFFLEdBQUtKLEtBQUtJLEVBQUlvQixFQUNsQnNELEVBQUl6RSxHQUFLTCxLQUFLSyxFQUFJbUIsR0FFMUIsRUFaQSxHLEVDRkEsV0FDSSxXQUFtQnBCLEVBQWtCQyxHQUFsQixLQUFBRCxJQUFrQixLQUFBQyxJQU16QyxPQUpJLFlBQUE0QixlQUFBLFNBQWU3QixFQUFXQyxHQUN0QkwsS0FBS0ksRUFBSUEsRUFDVEosS0FBS0ssRUFBSUEsR0FFakIsRUFQQSxHQ2FNMEUsRUFBTyxTQUFDQyxFQUFZeEQsRUFBZXlELEdBR2pDQSxFQUFNdEYsUUFBUUEsUUFBUXVGLEtBQU8sZUFDN0JELEVBQU0xRCxPQUFRQyxFQUFRLElBQVFtQixHQUM5QnNDLEVBQU10RixRQUFRQSxRQUFRd0YsU0FBUyxnQkFBaUJGLEVBQU1wRixPQUFPaUIsTUFBUSxFQUFJLElBQUssSUFDOUVtRSxFQUFNdEYsUUFBUUEsUUFBUXdGLFNBQVMsMEJBQTJCRixFQUFNcEYsT0FBT2lCLE1BQVEsRUFBSSxJQUFLLElBQ3hGbUUsRUFBTXBGLE9BQU91RixpQkFBaUIsU0FBUyxTQUFDMUQsR0FDSFYsU0FBU3FFLGNBQWMsVUFDbERDLFVBS2RDLE9BQU9DLHVCQUFzQixTQUFBNUcsR0FBSyxPQUFBbUcsRUFBS25HLEVBQUdBLEVBQUlvRyxFQUFJQyxPQUd0RGpFLFNBQVN5RSxtQkFBcUIsV0FDMUIsR0FBMkIsWUFBdkJ6RSxTQUFTMEUsV0FBYixDQUdBLElBQU05RixFQUFTLElBQUksRUFBTytDLEVBQWdCLEVBQUdBLEVBQWdCLEVBQUdBLEdBQzFEc0MsRUFBUSxJQUFJLEVBQU9qRSxTQUFTMkUsS0FBS0MsWUFBYTVFLFNBQVMyRSxLQUFLRSxhQUFjakcsR0FDaEZxRixFQUFNN0QsU0FBU0osU0FBUzJFLE1BRXhCLElBQU1HLEVBQVEsSUFBSSxFQUNaQyxFQUFtQixJQUFJLEVBQVNuRyxFQUFRcUYsR0FDeENlLEVDcENLLFNBQUNuRyxFQUFnQkQsR0FDNUIsSUFBTXFHLEVBQU0sQ0FDUjdGLEVBQUdSLEVBQU9vRSxVQUFVcEUsRUFBT2tFLEdBQUtqRSxFQUFPQSxPQUFPaUIsTUFBUSxJQUN0RFQsRUFBR1QsRUFBT3FFLFVBQVVyRSxFQUFPa0UsR0FBS2pFLEVBQU9BLE9BQU9rQixPQUFTLElBQ3ZEYSxPQUFRLElBQ1JrQixLQUFNLFVBQ05sQyxNQUFPLFNBQ1B3QyxTQUFVLENBQUMsRUFBRyxJQVVsQixNQUFPLENBQ0MsTUFBUzZDLEVBQ1QsY0FWTSxDQUNWN0YsRUFBRzZGLEVBQUk3RixFQUFLLFFBQVd1QyxFQUN2QnRDLEVBQUc0RixFQUFJNUYsRUFDUHVCLE9BQVEsR0FDUmtCLEtBQU0sUUFDTmxDLE1BQU8sVUFDUHdDLFNBQVUsQ0FBRVQsRUFBb0JBLEVBQWlCLEVBQUUsRUFBSUEsRUFBb0JBLEVBQWlCLEVBQUUsS0RxQjVFLENBQVdzQyxFQUFPckYsR0FDcEM0RCxFQUFvQixHQUt4QixJQUFLLElBQUk5RixLQUZUc0QsU0FBU3FFLGNBQWMsUUFBUUQsaUJBQWlCLFVBQVdXLEVBQWlCckIsZUFBZXhGLEtBQUs2RyxJQUVsRkMsRUFBZSxDQUN6QixJQUFNeEcsRUFBSXdHLEVBQWN0SSxHQUN4QjhGLEVBQVEwQyxLQUFLLElBQUksRUFBT3hJLEVBQ3BCLElBQUksRUFBWThCLEVBQUVZLEVBQUdaLEVBQUVhLEdBQ3ZCYixFQUFFb0MsT0FDRnBDLEVBQUVzRCxLQUNGdEQsRUFBRW9CLE1BQ0YsSUFBSSxFQUFTcEIsRUFBRTRELFNBQVMsR0FBSTVELEVBQUU0RCxTQUFTLElBQ3ZDSSxJQUlSc0MsRUFBTTNFLFNBQVdxQyxFQUNqQnlCLEVBQU05RCxTQUFTK0UsS0FBS0osR0FFcEJmLEVBQUssRUFBRyxFQUFHRSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgTW9kZWwgZnJvbSBcIi4uL01vZGVsL01vZGVsXCJcbmltcG9ydCBDYW1lcmEgZnJvbSBcIi4uL0NhbWVyYS9DYW1lcmFcIlxuaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9DYW52YXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHJlYWRvbmx5IGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgcmVhZG9ubHkgY2FtZXJhOiBDYW1lcmEsXG4gICAgICAgIHJlYWRvbmx5IGNhbnZhczogQ2FudmFzLFxuICAgICAgICApIHt9XG5cbiAgICBkcmF3KG1vZGVsOiBNb2RlbCkge1xuICAgICAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKClcbiAgICAgICAgbW9kZWwuZHJhdyh0aGlzKVxuICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKClcbiAgICB9XG5cbiAgICBhcmMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHI6IG51bWJlciwgYXM6IG51bWJlciwgYWU6IG51bWJlcik6IENvbnRleHQge1xuICAgICAgICB0aGlzLmNvbnRleHQuYXJjKHRoaXMuY2FtZXJhLlgoeCksIHRoaXMuY2FtZXJhLlkoeSksIHRoaXMuY2FtZXJhLnpUcmFuc2Zvcm0ociksIGFzLCBhZSlcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICBmaWxsKGNvbG9yOiBzdHJpbmcpOiBDb250ZXh0IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yXG4gICAgICAgIHRoaXMuY29udGV4dC5maWxsKClcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59XG5cbnR5cGUgRHJhd0Z1bmN0aW9uID0gKGN0eDogQ29udGV4dCkgPT4gdm9pZFxuXG5leHBvcnQge1xuICAgIERyYXdGdW5jdGlvblxufSIsImNvbnN0IGNEdXJhdGlvbiA9IDBcbmNvbnN0IGZwcyA9IDIwXG5jb25zdCBkcGYgPSAxIC8gZnBzICogMTAwMFxubGV0IHpvb21MZXZlbCA9IDIuNVxubGV0IHpvb21NaW4gPSAwLjFcbmNvbnN0IHpvb21BY3Rpb25Qb3cgPSAwLjEwXG5jb25zdCBkZWNhbEJ5TW92ZSA9IDI1XG5cbmxldCBtYXhQbGFuZXRzID0gNFxubGV0IHBsYW5ldHNSYWRpdXNEZWYgPSB7bWluOiAzLCBtYXg6IDcwfVxuY29uc3QgcGxhbmV0c01pbkRpc3QgPSAxMFxuY29uc3QgcGxhbmV0QmFzZVNwZWVkID0gNDBcblxuY29uc3Qgc3BhY2VXID0gMTAwMDBcbmNvbnN0IHNwYWNlSCA9IDEwMDAwXG5jb25zdCBkZWNhbFggPSBzcGFjZVcgLyAyXG5jb25zdCBkZWNhbFkgPSBzcGFjZUggLyAyXG5cbmNvbnN0IGdyYXZpdHlQdWxsQnlEZWx0YSA9IDFcbmNvbnN0IGRpc3RQb3cgPSA1XG5cbmNvbnN0IGZvbnRTaXplID0gMTRcbmxldCBkZWJ1ZyA9IG51bGxcbmNvbnN0IGVhcnRoU3BlZWQgPSAyOS43OCAqIDEwMDBcbmNvbnN0IEcgPSBNYXRoLnBvdygxMCwgLTExKSAqIDYuNjc0XG5cbmVudW0gUGxheU1vZGUge1xuICAgIFBMQVksXG4gICAgUEFVU0Vcbn1cblxuY29uc3QgbW9kZSA9IFBsYXlNb2RlLlBMQVlcbi8vIGNvbnN0IGttUGVyUHggPSAxLjNlNVxuY29uc3Qga21QZXJQeCA9IDEuOGU1XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBnYW1lU3BlZWQ6IDM2NSAqIDI0ICogNjAgKiAxNSxcbiAgICAvLyBnYW1lU3BlZWQ6IDEwMCxcbiAgICBrbVBlclB4LFxuICAgIG1QZXJQeDoga21QZXJQeCAqIDEwMDAsXG4gICAga2dQZXJQeERlbnNpdHk6IDEyMDAsXG4gICAgRyxcbiAgICBncmF2aXR5UHVsbEJ5RGVsdGEsXG4gICAgY0R1cmF0aW9uLFxuICAgIGZwcyxcbiAgICBkcGYsXG4gICAgem9vbUxldmVsLFxuICAgIHpvb21BY3Rpb25Qb3csXG4gICAgZGVjYWxCeU1vdmUsXG4gICAgbWF4UGxhbmV0cyxcbiAgICBwbGFuZXRzUmFkaXVzRGVmLFxuICAgIHBsYW5ldHNNaW5EaXN0LFxuICAgIHBsYW5ldEJhc2VTcGVlZCxcbiAgICBzcGFjZVcsXG4gICAgc3BhY2VILFxuICAgIGRlY2FsWCxcbiAgICBkZWNhbFksXG4gICAgZGlzdFBvdyxcbiAgICBmb250U2l6ZSxcbiAgICBkZWJ1ZyxcbiAgICBQbGF5TW9kZSxcbiAgICBtb2RlLFxuICAgIHpvb21NaW4sXG4gICAgZWFydGhTcGVlZFxufSIsImltcG9ydCBFbnRpdHkgZnJvbSBcIi4uL0VudGl0eS9FbnRpdHlcIlxuaW1wb3J0IENvbnRleHQgZnJvbSBcIi4vQ29udGV4dFwiXG5pbXBvcnQgQ2FtZXJhIGZyb20gXCIuLi9DYW1lcmEvQ2FtZXJhXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcbiAgICByZWFkb25seSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50XG4gICAgcmVhZG9ubHkgY29udGV4dDogQ29udGV4dFxuICAgIHB1YmxpYyBlbnRpdGllczogRW50aXR5W11cblxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBjYW1lcmE6IENhbWVyYSkge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aFxuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBoZWlnaHRcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gbmV3IENvbnRleHQodGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLCBjYW1lcmEsIHRoaXMpXG4gICAgICAgIHRoaXMuZW50aXRpZXMgPSBbXVxuICAgIH1cblxuICAgIGFwcGVuZFRvKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpXG4gICAgfVxuXG4gICAgdXBkYXRlKGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGUgPT4ge1xuICAgICAgICAgICAgZS51cGRhdGUoZGVsdGEpXG4gICAgICAgICAgICBlLmRyYXcoZGVsdGEsIHRoaXMuY29udGV4dClcbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IENvbnRleHQgZnJvbSBcIi4uL0NhbnZhcy9Db250ZXh0XCJcbmltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi4vUGh5c2ljL0Nvb3JkaW5hdGVzXCJcbmltcG9ydCBNb2RlbCBmcm9tIFwiLi9Nb2RlbFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpc2MgaW1wbGVtZW50cyBNb2RlbCB7XG4gICAgY29uc3RydWN0b3IocHVibGljIGNvb3JkczogQ29vcmRpbmF0ZXMsIHB1YmxpYyByYWRpdXM6IG51bWJlciwgcHVibGljIGNvbG9yOiBzdHJpbmcpIHt9XG5cbiAgICBkcmF3KGN0eDogQ29udGV4dCkge1xuICAgICAgICBjdHguYXJjKHRoaXMuY29vcmRzLngsIHRoaXMuY29vcmRzLnksIHRoaXMucmFkaXVzLCAwLCAyICogTWF0aC5QSSlcbiAgICAgICAgY3R4LmZpbGwodGhpcy5jb2xvcilcbiAgICB9XG5cbiAgICBnZXRDb29yZGluYXRlcygpOiBDb29yZGluYXRlcyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvb3Jkc1xuICAgIH1cblxuICAgIHNldENvb3JkaW5hdGVzKGNvb3JkczogQ29vcmRpbmF0ZXMpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb29yZHMgPSBjb29yZHNcbiAgICB9XG59IiwiaW1wb3J0IFZlbG9jaXR5IGZyb20gXCIuL1ZlbG9jaXR5XCI7XG5pbXBvcnQgUGxhbmV0IGZyb20gXCIuLi9QbGFuZXRcIlxuaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuL0Nvb3JkaW5hdGVzXCJcbmltcG9ydCAqIGFzIEdlb21ldHJ5IGZyb20gXCIuL0dlb21ldHJ5XCJcbmltcG9ydCBDb25maWcgZnJvbSBcIi4uL0NvbmZpZ1wiXG5cbmNvbnN0IGdldEZvcmNlID0gKGE6IFBsYW5ldCwgYjogUGxhbmV0KTogbnVtYmVyID0+IHtcbiAgICBjb25zdCBkaXN0ID0gR2VvbWV0cnkuZ2V0RGlzdGFuY2VCZXR3ZWVuT2JqZWN0cyhhLmNvb3JkcywgYi5jb29yZHMpXG4gICAgaWYgKGRpc3QgPT0gMCB8fCBOdW1iZXIuaXNOYU4oZGlzdCkpIHtcbiAgICAgICAgcmV0dXJuIFxuICAgIH1cbiAgICBjb25zdCBGID0gQ29uZmlnLkcgKiAoKGEubWFzcypiLm1hc3MpLyhkaXN0KmRpc3QpKVxuXG4gICAgcmV0dXJuIEYgKiBDb25maWcuZ3Jhdml0eVB1bGxCeURlbHRhXG59XG5cbmNvbnN0IGdldEZvcmNlUmF0aW8gPSAoZGlyQTogbnVtYmVyLCBkaXJCOiBudW1iZXIsIGNvb3JkQTogQ29vcmRpbmF0ZXMsIGNvb3JkQjogQ29vcmRpbmF0ZXMpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiAtKGRpckEgLSBkaXJCKSAvIChNYXRoLmFicyhjb29yZEEueCAtIGNvb3JkQi54KSArIE1hdGguYWJzKGNvb3JkQS55IC0gY29vcmRCLnkpKVxufVxuXG5leHBvcnQgZGVmYXVsdCAodmVsb2NpdHk6IFZlbG9jaXR5LCBhOiBQbGFuZXQsIGI6IFBsYW5ldCwgZGVsdGE6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGFjYyA9IChnZXRGb3JjZShhLCBiKSAvIGEubWFzcykgLyBDb25maWcubVBlclB4XG4gICAgdmVsb2NpdHkuYWNjZWxlcmF0ZShcbiAgICAgICAgYWNjICogZ2V0Rm9yY2VSYXRpbyhhLmNvb3Jkcy54LCBiLmNvb3Jkcy54LCBhLmNvb3JkcywgYi5jb29yZHMpLFxuICAgICAgICBhY2MgKiBnZXRGb3JjZVJhdGlvKGEuY29vcmRzLnksIGIuY29vcmRzLnksIGEuY29vcmRzLCBiLmNvb3JkcyksXG4gICAgICAgIGRlbHRhXG4gICAgKVxufSIsImltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi9Db29yZGluYXRlc1wiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuLi9Db25maWdcIlxuXG5jb25zdCBnZXREaXN0YW5jZUJldHdlZW5PYmplY3RzID0gKGE6IENvb3JkaW5hdGVzLCBiOiBDb29yZGluYXRlcyk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIChNYXRoLmFicyhiLnggLSBhLngpICsgTWF0aC5hYnMoYi55IC0gYS55KSkgKiBDb25maWcubVBlclB4XG59XG5cbmV4cG9ydCB7XG4gICAgZ2V0RGlzdGFuY2VCZXR3ZWVuT2JqZWN0c1xufSIsImltcG9ydCBFbnRpdHkgZnJvbSBcIi4vRW50aXR5L0VudGl0eVwiXG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4vUGh5c2ljL0Nvb3JkaW5hdGVzXCJcbmltcG9ydCBDb250ZXh0IGZyb20gXCIuL0NhbnZhcy9Db250ZXh0XCJcbmltcG9ydCBEaXNjIGZyb20gXCIuL01vZGVsL0Rpc2NcIlxuaW1wb3J0IFZlbG9jaXR5IGZyb20gXCIuL1BoeXNpYy9WZWxvY2l0eVwiXG5pbXBvcnQgYXBwbHlHcmF2aXR5IGZyb20gXCIuL1BoeXNpYy9HcmF2aXR5XCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxhbmV0IGltcGxlbWVudHMgRW50aXR5IHtcbiAgICBwdWJsaWMgZW50aXRpZXM6IEVudGl0eVtdID0gW11cbiAgICBwdWJsaWMgbW9kZWw6IERpc2NcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgaWQ6IHN0cmluZyxcbiAgICAgICAgcHVibGljIGNvb3JkczogQ29vcmRpbmF0ZXMsXG4gICAgICAgIHJlYWRvbmx5IHJhZGl1czogbnVtYmVyLFxuICAgICAgICByZWFkb25seSBtYXNzOiBudW1iZXIsXG4gICAgICAgIHJlYWRvbmx5IGNvbG9yOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyB2ZWxvY2l0eTogVmVsb2NpdHksXG4gICAgICAgIHJlYWRvbmx5IHBsYW5ldHM6IFBsYW5ldFtdXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBEaXNjKHRoaXMuY29vcmRzLCB0aGlzLnJhZGl1cywgdGhpcy5jb2xvcilcbiAgICAgICAgfVxuXG4gICAgZ2V0RW50aXRpZXMoKTogRW50aXR5W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGllc1xuICAgIH1cblxuICAgIHVwZGF0ZShkZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5wbGFuZXRzKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5wbGFuZXRzW2ldXG5cbiAgICAgICAgICAgIGlmIChwLmlkID09IHRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXBwbHlHcmF2aXR5KHRoaXMudmVsb2NpdHksIHRoaXMsIHAsIGRlbHRhKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmVsb2NpdHkuYXBwbHkodGhpcy5jb29yZHMsIGRlbHRhKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmlkLCB0aGlzLmNvb3JkcylcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGUgPT4gZS51cGRhdGUoZGVsdGEpKVxuICAgIH1cblxuICAgIGRyYXcoZGVsdGE6IG51bWJlciwgY29udGV4dDogQ29udGV4dCk6IHZvaWQge1xuICAgICAgICBjb250ZXh0LmRyYXcodGhpcy5tb2RlbClcbiAgICB9XG5cbiAgICBnZXRDb29yZGluYXRlcygpOiBDb29yZGluYXRlcyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvb3Jkc1xuICAgIH1cblxuICAgIHNldENvb3JkaW5hdGVzKGNvb3JkczogQ29vcmRpbmF0ZXMpOiB2b2lkIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coY29vcmRzKVxuICAgICAgICB0aGlzLmNvb3JkcyA9IGNvb3Jkc1xuICAgICAgICAvLyB0aGlzLm1vZGVsLnNldENvb3JkaW5hdGVzKHRoaXMuY29vcmRzKVxuICAgIH1cbn0iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuLi9FbnRpdHkvRW50aXR5XCJcbmltcG9ydCBDb250ZXh0IGZyb20gXCIuLi9DYW52YXMvQ29udGV4dFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5lIGltcGxlbWVudHMgRW50aXR5IHtcbiAgICBwdWJsaWMgZW50aXRpZXM6IEVudGl0eVtdID0gW11cblxuICAgIHVwZGF0ZShkZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IGUudXBkYXRlKGRlbHRhKSlcbiAgICB9XG5cbiAgICBkcmF3KGRlbHRhOiBudW1iZXIsIGNvbnRleHQ6IENvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgY29udGV4dC5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjb250ZXh0LmNhbnZhcy5jYW52YXMud2lkdGgsIGNvbnRleHQuY2FudmFzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBjb250ZXh0LmNhbnZhcy5jYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjMDAwMDAwXCJcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGUgPT4gZS5kcmF3KGRlbHRhLCBjb250ZXh0KSlcbiAgICAgICAgY29udGV4dC5jb250ZXh0LnN0cm9rZSgpOyAgICBcbiAgICB9XG5cbiAgICBnZXRFbnRpdGllcygpOiBFbnRpdHlbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbWVyYSB7XG4gICAgcHVibGljIHg6IG51bWJlciA9IDBcbiAgICBwdWJsaWMgeTogbnVtYmVyID0gMFxuICAgIHB1YmxpYyB6OiBudW1iZXIgPSAxXG5cbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgICAgICB0aGlzLnogPSB6XG4gICAgfVxuXG4gICAgWCh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy56VHJhbnNmb3JtKHggLSB0aGlzLngpXG4gICAgfVxuXG4gICAgWSh5OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy56VHJhbnNmb3JtKHkgLSB0aGlzLnkpXG4gICAgfVxuXG4gICAgelRyYW5zZm9ybSh2OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdiAqICgxIC8gdGhpcy56KVxuICAgIH1cblxuICAgIHJlbGF0aXZlWCh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy54ICsgeFxuICAgIH1cblxuICAgIHJlbGF0aXZlWSh5OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy55ICsgeVxuICAgIH1cbn0iLCJpbXBvcnQgQ2FtZXJhIGZyb20gXCIuLi9DYW1lcmEvQ2FtZXJhXCJcbmltcG9ydCBDb25maWcgZnJvbSBcIi4uL0NvbmZpZ1wiXG5pbXBvcnQgQ2FudmFzIGZyb20gXCIuLi9DYW52YXMvQ2FudmFzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5Ym9hcmQge1xuICAgIHB1YmxpYyBhY3Rpb25CeUtleWNvZGU6IHtba2V5OiBudW1iZXJdOiBGdW5jdGlvbn1cblxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGNhbWVyYTogQ2FtZXJhLCByZWFkb25seSBjYW52YXM6IENhbnZhcykge1xuICAgICAgICB0aGlzLmFjdGlvbkJ5S2V5Y29kZSA9IHtcbiAgICAgICAgICAgIC8vIDY4OiAoKSA9PiB7ZGVidWcuVG9nZ2xlKCk7fSxcbiAgICAgICAgICAgIC8vIDgzOiAoKSA9PiB7bW9kZSA9IG1vZGUgPT0gUEFVU0UgPyBQTEFZIDogUEFVU0U7fSxcbiAgICAgICAgICAgIDgyOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueCA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS55ID0gMFxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnogPSAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgOTA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueiA8PSBDb25maWcuem9vbU1pbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueiAtPSBDb25maWcuem9vbUFjdGlvblBvd1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDg4OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueiArPSBDb25maWcuem9vbUFjdGlvblBvd1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDM3OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnggLSBDb25maWcuZGVjYWxCeU1vdmUgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnggLT0gQ29uZmlnLmRlY2FsQnlNb3ZlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMzg6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueSAtIENvbmZpZy5kZWNhbEJ5TW92ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueSAtPSBDb25maWcuZGVjYWxCeU1vdmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAzOTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS54ID49IENvbmZpZy5zcGFjZVcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS54ICs9IENvbmZpZy5kZWNhbEJ5TW92ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDQwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnkgPj0gQ29uZmlnLnNwYWNlSCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnkgKz0gQ29uZmlnLmRlY2FsQnlNb3ZlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlib2FyZChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5hY3Rpb25CeUtleWNvZGUgPT0gdW5kZWZpbmVkIHx8IFxuICAgICAgICAgICAgIXRoaXMuYWN0aW9uQnlLZXljb2RlW2V2ZW50LmtleUNvZGVdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3Rpb25CeUtleWNvZGVbZXZlbnQua2V5Q29kZV0oKTtcbiAgICB9XG59IiwiaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuL0Nvb3JkaW5hdGVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVsb2NpdHkge1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB4OiBudW1iZXIsIHB1YmxpYyB5OiBudW1iZXIpIHt9XG5cbiAgICBhY2NlbGVyYXRlKHg6IG51bWJlciwgeTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueCArPSB4ICogZGVsdGFcbiAgICAgICAgdGhpcy55ICs9IHkgKiBkZWx0YVxuICAgIH1cblxuICAgIGFwcGx5KG9iajogQ29vcmRpbmF0ZXMsIGRlbHRhOiBudW1iZXIpIHtcbiAgICAgICAgb2JqLnggKz0gdGhpcy54ICogZGVsdGFcbiAgICAgICAgb2JqLnkgKz0gdGhpcy55ICogZGVsdGFcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29vcmRpbmF0ZXMge1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB4OiBudW1iZXIsIHB1YmxpYyB5OiBudW1iZXIpIHt9XG5cbiAgICBzZXRDb29yZGluYXRlcyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnggPSB4XG4gICAgICAgIHRoaXMueSA9IHlcbiAgICB9XG59IiwiaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9zcmMvQ2FudmFzL0NhbnZhc1wiXG5pbXBvcnQgUGxhbmV0IGZyb20gXCIuL3NyYy9QbGFuZXRcIlxuaW1wb3J0IFNjZW5lIGZyb20gXCIuL3NyYy9TY2VuZS9pbmRleFwiXG5pbXBvcnQgQ2FtZXJhIGZyb20gXCIuL3NyYy9DYW1lcmEvQ2FtZXJhXCJcbmltcG9ydCBLZXlib2FyZCBmcm9tIFwiLi9zcmMvQ29udHJvbHMvS2V5Ym9hcmRcIlxuaW1wb3J0IENvbmZpZyBmcm9tIFwiLi9zcmMvQ29uZmlnXCJcbmltcG9ydCBWZWxvY2l0eSBmcm9tIFwiLi9zcmMvUGh5c2ljL1ZlbG9jaXR5XCJcbmltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi9zcmMvUGh5c2ljL0Nvb3JkaW5hdGVzXCJcblxuaW1wb3J0IGdldFBsYW5ldHMgZnJvbSBcIi4vcGxhbmV0c1wiXG5cbmxldCBjVGltZSA9IDBcblxuY29uc3QgbWFpbiA9ICh0MTogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBib2FyZDogQ2FudmFzKSA9PiB7XG4gICAgLy8gY1RpbWUgKz0gZGVsdGFcbiAgICAvLyBpZiAoY1RpbWUgPiBDb25maWcuZHBmKSB7XG4gICAgICAgIGJvYXJkLmNvbnRleHQuY29udGV4dC5mb250ID0gXCIzMHB4IFZlcmRhbmFcIjtcbiAgICAgICAgYm9hcmQudXBkYXRlKChkZWx0YSAvIDEwMDApICogQ29uZmlnLmdhbWVTcGVlZClcbiAgICAgICAgYm9hcmQuY29udGV4dC5jb250ZXh0LmZpbGxUZXh0KFwiSGV5IENodWNrISDwn6SYXCIsIGJvYXJkLmNhbnZhcy53aWR0aCAvIDIgLSAxMDAsIDMwKTtcbiAgICAgICAgYm9hcmQuY29udGV4dC5jb250ZXh0LmZpbGxUZXh0KFwi8J+kmCBDbGlxdWUgbW9pIGRlc3N1cyDwn6SYXCIsIGJvYXJkLmNhbnZhcy53aWR0aCAvIDIgLSAxNjUsIDYwKTtcbiAgICAgICAgYm9hcmQuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdWRpb1wiKVxuICAgICAgICAgICAgYXVkaW8ucGxheSgpXG4gICAgICAgIH0pXG4gICAgICAgIC8vIGNUaW1lIC09IENvbmZpZy5kcGZcbiAgICAvLyB9XG5cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQgPT4gbWFpbih0LCB0IC0gdDEsIGJvYXJkKSlcbn1cblxuZG9jdW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwiY29tcGxldGVcIikge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2FtZXJhID0gbmV3IENhbWVyYShDb25maWcuc3BhY2VXIC8gMiwgQ29uZmlnLnNwYWNlSCAvIDIsIENvbmZpZy56b29tTGV2ZWwpXG4gICAgY29uc3QgYm9hcmQgPSBuZXcgQ2FudmFzKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LCBjYW1lcmEpXG4gICAgYm9hcmQuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSlcbiAgICBcbiAgICBjb25zdCBzY2VuZSA9IG5ldyBTY2VuZSgpXG4gICAgY29uc3Qga2V5Ym9hcmRDb250cm9scyA9IG5ldyBLZXlib2FyZChjYW1lcmEsIGJvYXJkKVxuICAgIGNvbnN0IHBsYW5ldHNDb25maWcgPSBnZXRQbGFuZXRzKGJvYXJkLCBjYW1lcmEpXG4gICAgbGV0IHBsYW5ldHM6IFBsYW5ldFtdID0gW11cblxuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwga2V5Ym9hcmRDb250cm9scy5oYW5kbGVLZXlib2FyZC5iaW5kKGtleWJvYXJkQ29udHJvbHMpKTtcbiAgICBcbiAgICBmb3IgKGxldCBpIGluIHBsYW5ldHNDb25maWcpIHtcbiAgICAgICAgY29uc3QgcCA9IHBsYW5ldHNDb25maWdbaV1cbiAgICAgICAgcGxhbmV0cy5wdXNoKG5ldyBQbGFuZXQoaSxcbiAgICAgICAgICAgIG5ldyBDb29yZGluYXRlcyhwLngsIHAueSksXG4gICAgICAgICAgICBwLnJhZGl1cyxcbiAgICAgICAgICAgIHAubWFzcyxcbiAgICAgICAgICAgIHAuY29sb3IsXG4gICAgICAgICAgICBuZXcgVmVsb2NpdHkocC52ZWxvY2l0eVswXSwgcC52ZWxvY2l0eVsxXSksXG4gICAgICAgICAgICBwbGFuZXRzXG4gICAgICAgICAgICApKVxuICAgIH1cblxuICAgIHNjZW5lLmVudGl0aWVzID0gcGxhbmV0c1xuICAgIGJvYXJkLmVudGl0aWVzLnB1c2goc2NlbmUpXG4gICAgXG4gICAgbWFpbigwLCAwLCBib2FyZClcbiB9IiwiaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9zcmMvQ2FudmFzL0NhbnZhc1wiXG5pbXBvcnQgQ2FtZXJhIGZyb20gXCIuL3NyYy9DYW1lcmEvQ2FtZXJhXCJcbmltcG9ydCBDb25maWcgZnJvbSBcIi4vc3JjL0NvbmZpZ1wiXG5cbmV4cG9ydCBkZWZhdWx0IChjYW52YXM6IENhbnZhcywgY2FtZXJhOiBDYW1lcmEpOiB7W2tleTogc3RyaW5nXTogYW55fSA9PiB7XG4gICAgY29uc3Qgc3VuID0ge1xuICAgICAgICB4OiBjYW1lcmEucmVsYXRpdmVYKGNhbWVyYS56ICogKGNhbnZhcy5jYW52YXMud2lkdGggLyAyKSksXG4gICAgICAgIHk6IGNhbWVyYS5yZWxhdGl2ZVkoY2FtZXJhLnogKiAoY2FudmFzLmNhbnZhcy5oZWlnaHQgLyAyKSksXG4gICAgICAgIHJhZGl1czogMTIwLFxuICAgICAgICBtYXNzOiAxLjk4OTFlMzAsXG4gICAgICAgIGNvbG9yOiBcIm9yYW5nZVwiLFxuICAgICAgICB2ZWxvY2l0eTogWzAsIDBdXG4gICAgfVxuICAgIGNvbnN0IGVhcnRoID0ge1xuICAgICAgICB4OiBzdW4ueCAtICgxNDkuOTZlOSAvIENvbmZpZy5tUGVyUHgpLFxuICAgICAgICB5OiBzdW4ueSxcbiAgICAgICAgcmFkaXVzOiAzMCxcbiAgICAgICAgbWFzczogNS45NzJlMjQsXG4gICAgICAgIGNvbG9yOiBcInNreWJsdWVcIixcbiAgICAgICAgdmVsb2NpdHk6IFsoQ29uZmlnLmVhcnRoU3BlZWQgLyBDb25maWcubVBlclB4KSAqIDEvMywgKENvbmZpZy5lYXJ0aFNwZWVkIC8gQ29uZmlnLm1QZXJQeCkgKiAyLzNdXG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInN1bjQxXCI6IHN1bixcbiAgICAgICAgICAgIFwiZWFydGggYWxvcnNcIjogZWFydGhcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==