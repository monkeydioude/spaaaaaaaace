!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o,i=function(){function t(t,e,n){this.context=t,this.camera=e,this.canvas=n}return t.prototype.draw=function(t){this.context.beginPath(),t.draw(this),this.context.stroke()},t.prototype.arc=function(t,e,n,o,i){return this.context.arc(this.camera.X(t),this.camera.Y(e),this.camera.zTransform(n),o,i),this},t.prototype.fill=function(t){return this.context.fillStyle=t,this.context.fill(),this},t}(),r=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.context=new i(this.canvas.getContext("2d"),n,this),this.entities=[]}return t.prototype.appendTo=function(t){t.appendChild(this.canvas)},t.prototype.update=function(t){var e=this;this.entities.forEach((function(n){n.update(t),n.draw(t,e.context)}))},t}(),s=function(){function t(t,e,n){this.coords=t,this.radius=e,this.color=n}return t.prototype.draw=function(t){t.arc(this.coords.x,this.coords.y,this.radius,0,2*Math.PI),t.fill(this.color)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),c=6.674*Math.pow(10,-11);!function(t){t[t.PLAY=0]="PLAY",t[t.PAUSE=1]="PAUSE"}(o||(o={}));o.PLAY;var a=7884e3,u=18e7,h=c,d=1,f=2.5,y=.1,p=25,l=1e4,v=1e4,m=.1,x=29780,b=function(t,e){var n=function(t,e){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))*u}(t.coords,e.coords);if(0!=n&&!Number.isNaN(n))return h*(t.mass*e.mass/(n*n))*d},w=function(t,e,n,o){return-(t-e)/(Math.abs(n.x-o.x)+Math.abs(n.y-o.y))},g=function(t,e,n,o){var i=b(e,n)/e.mass/u;t.accelerate(i*w(e.coords.x,n.coords.x,e.coords,n.coords),i*w(e.coords.y,n.coords.y,e.coords,n.coords),o)},z=function(){function t(t,e,n,o,i,r,c){this.id=t,this.coords=e,this.radius=n,this.mass=o,this.color=i,this.velocity=r,this.planets=c,this.entities=[],this.model=new s(this.coords,this.radius,this.color)}return t.prototype.getEntities=function(){return this.entities},t.prototype.update=function(t){for(var e in this.planets){var n=this.planets[e];n.id!=this.id&&g(this.velocity,this,n,t)}this.velocity.apply(this.coords,t),this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.draw(this.model)},t.prototype.getCoordinates=function(){return this.coords},t.prototype.setCoordinates=function(t){this.coords=t},t}(),C=function(){function t(){this.entities=[]}return t.prototype.update=function(t){this.entities.forEach((function(e){return e.update(t)}))},t.prototype.draw=function(t,e){e.context.clearRect(0,0,e.canvas.canvas.width,e.canvas.canvas.height),e.canvas.canvas.style.backgroundColor="#000000",this.entities.forEach((function(n){return n.draw(t,e)})),e.context.stroke()},t.prototype.getEntities=function(){return this.entities},t}(),P=function(){function t(t,e,n){this.x=0,this.y=0,this.z=1,this.x=t,this.y=e,this.z=n}return t.prototype.X=function(t){return this.zTransform(t-this.x)},t.prototype.Y=function(t){return this.zTransform(t-this.y)},t.prototype.zTransform=function(t){return t*(1/this.z)},t.prototype.relativeX=function(t){return this.x+t},t.prototype.relativeY=function(t){return this.y+t},t}(),E=function(){function t(t,e){var n=this;this.camera=t,this.canvas=e,this.actionByKeycode={82:function(){n.camera.x=0,n.camera.y=0,n.camera.z=1},90:function(){n.camera.z<=m||(n.camera.z-=y)},88:function(){n.camera.z+=y},37:function(){n.camera.x-p<=0||(n.camera.x-=p)},38:function(){n.camera.y-p<=0||(n.camera.y-=p)},39:function(){n.camera.x>=l||(n.camera.x+=p)},40:function(){n.camera.y>=v||(n.camera.y+=p)}}}return t.prototype.handleKeyboard=function(t){null!=this.actionByKeycode&&this.actionByKeycode[t.keyCode]&&this.actionByKeycode[t.keyCode]()},t}(),S=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.accelerate=function(t,e,n){this.x+=t*n,this.y+=e*n},t.prototype.apply=function(t,e){t.x+=this.x*e,t.y+=this.y*e},t}(),M=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.setCoordinates=function(t,e){this.x=t,this.y=e},t}(),T=!1,k=function(t,e,n){n.context.context.font="30px Verdana",n.update(e/1e3*a),0==T&&(n.context.context.fillText("Hey Chuck! ðŸ¤˜",n.canvas.width/2-100,30),n.context.context.fillText("ðŸ¤˜ Clique moi dessus ðŸ¤˜",n.canvas.width/2-165,60)),window.requestAnimationFrame((function(e){return k(e,e-t,n)}))};document.onreadystatechange=function(){if("complete"==document.readyState){var t=new P(l/2,v/2,f),e=new r(document.body.clientWidth,document.body.clientHeight,t);e.appendTo(document.body);var n=new C,o=new E(t,e),i=function(t,e){var n={x:e.relativeX(e.z*(t.canvas.width/2)),y:e.relativeY(e.z*(t.canvas.height/2)),radius:120,mass:1.9891e30,color:"orange",velocity:[0,0]};return{sun41:n,"earth alors":{x:n.x-14996e7/u,y:n.y,radius:30,mass:5972e21,color:"skyblue",velocity:[x/u*1/3,x/u*2/3]},interloper:{x:n.x+10096e7/u,y:n.y+20,radius:24,mass:3972e21,color:"red",velocity:[x/u*1/3,x/u*2/3]}}}(e,t),s=[];for(var c in e.canvas.addEventListener("mouseup",(function(t){var e=document.querySelector("#audio");0==T?e.play():e.pause(),T=!T})),document.querySelector("body").addEventListener("keydown",o.handleKeyboard.bind(o)),i){var a=i[c];s.push(new z(c,new M(a.x,a.y),a.radius,a.mass,a.color,new S(a.velocity[0],a.velocity[1]),s))}n.entities=s,e.entities.push(n),k(0,0,e)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9Db250ZXh0LnRzIiwid2VicGFjazovLy8uL3NyYy9Db25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9DYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVsL0Rpc2MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9HcmF2aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvR2VvbWV0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BsYW5ldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2NlbmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbWVyYS9DYW1lcmEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xzL0tleWJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9QaHlzaWMvVmVsb2NpdHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BoeXNpYy9Db29yZGluYXRlcy50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9wbGFuZXRzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUGxheU1vZGUiLCJjb250ZXh0IiwiY2FtZXJhIiwiY2FudmFzIiwiZHJhdyIsIm1vZGVsIiwidGhpcyIsImJlZ2luUGF0aCIsInN0cm9rZSIsImFyYyIsIngiLCJ5IiwiYXMiLCJhZSIsIlgiLCJZIiwielRyYW5zZm9ybSIsImZpbGwiLCJjb2xvciIsImZpbGxTdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImVudGl0aWVzIiwiYXBwZW5kVG8iLCJlbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJ1cGRhdGUiLCJkZWx0YSIsImZvckVhY2giLCJlIiwiY29vcmRzIiwicmFkaXVzIiwiY3R4IiwiTWF0aCIsIlBJIiwiZ2V0Q29vcmRpbmF0ZXMiLCJzZXRDb29yZGluYXRlcyIsIkciLCJwb3ciLCJQTEFZIiwia21QZXJQeCIsImdldEZvcmNlIiwiYSIsImIiLCJkaXN0IiwiYWJzIiwiQ29uZmlnIiwiTnVtYmVyIiwiaXNOYU4iLCJtYXNzIiwiZ2V0Rm9yY2VSYXRpbyIsImRpckEiLCJkaXJCIiwiY29vcmRBIiwiY29vcmRCIiwidmVsb2NpdHkiLCJhY2MiLCJhY2NlbGVyYXRlIiwiaWQiLCJwbGFuZXRzIiwiZ2V0RW50aXRpZXMiLCJhcHBseSIsImNsZWFyUmVjdCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwieiIsInYiLCJyZWxhdGl2ZVgiLCJyZWxhdGl2ZVkiLCJhY3Rpb25CeUtleWNvZGUiLCI4MiIsIjkwIiwiODgiLCIzNyIsIjM4IiwiMzkiLCI0MCIsImhhbmRsZUtleWJvYXJkIiwiZXZlbnQiLCJ1bmRlZmluZWQiLCJrZXlDb2RlIiwib2JqIiwicGxheSIsIm1haW4iLCJ0MSIsImJvYXJkIiwiZm9udCIsImZpbGxUZXh0Iiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImJvZHkiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInNjZW5lIiwia2V5Ym9hcmRDb250cm9scyIsInBsYW5ldHNDb25maWciLCJzdW4i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Y3BJLEdBQ3hCOEYsRUFBUTRDLEtBQUssSUFBSSxFQUFPMUksRUFDcEIsSUFBSSxFQUFZOEIsRUFBRVksRUFBR1osRUFBRWEsR0FDdkJiLEVBQUVvQyxPQUNGcEMsRUFBRXNELEtBQ0Z0RCxFQUFFb0IsTUFDRixJQUFJLEVBQVNwQixFQUFFNEQsU0FBUyxHQUFJNUQsRUFBRTRELFNBQVMsSUFDdkNJLElBSVJvQyxFQUFNekUsU0FBV3FDLEVBQ2pCMEIsRUFBTS9ELFNBQVNpRixLQUFLUixHQUVwQlosRUFBSyxFQUFHLEVBQUdFIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBNb2RlbCBmcm9tIFwiLi4vTW9kZWwvTW9kZWxcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi4vQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgQ2FudmFzIGZyb20gXCIuL0NhbnZhc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgcmVhZG9ubHkgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICByZWFkb25seSBjYW1lcmE6IENhbWVyYSxcbiAgICAgICAgcmVhZG9ubHkgY2FudmFzOiBDYW52YXMsXG4gICAgICAgICkge31cblxuICAgIGRyYXcobW9kZWw6IE1vZGVsKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKVxuICAgICAgICBtb2RlbC5kcmF3KHRoaXMpXG4gICAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKVxuICAgIH1cblxuICAgIGFyYyh4OiBudW1iZXIsIHk6IG51bWJlciwgcjogbnVtYmVyLCBhczogbnVtYmVyLCBhZTogbnVtYmVyKTogQ29udGV4dCB7XG4gICAgICAgIHRoaXMuY29udGV4dC5hcmModGhpcy5jYW1lcmEuWCh4KSwgdGhpcy5jYW1lcmEuWSh5KSwgdGhpcy5jYW1lcmEuelRyYW5zZm9ybShyKSwgYXMsIGFlKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIGZpbGwoY29sb3I6IHN0cmluZyk6IENvbnRleHQge1xuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gY29sb3JcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGwoKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbn1cblxudHlwZSBEcmF3RnVuY3Rpb24gPSAoY3R4OiBDb250ZXh0KSA9PiB2b2lkXG5cbmV4cG9ydCB7XG4gICAgRHJhd0Z1bmN0aW9uXG59IiwiY29uc3QgY0R1cmF0aW9uID0gMFxuY29uc3QgZnBzID0gMjBcbmNvbnN0IGRwZiA9IDEgLyBmcHMgKiAxMDAwXG5sZXQgem9vbUxldmVsID0gMi41XG5sZXQgem9vbU1pbiA9IDAuMVxuY29uc3Qgem9vbUFjdGlvblBvdyA9IDAuMTBcbmNvbnN0IGRlY2FsQnlNb3ZlID0gMjVcblxubGV0IG1heFBsYW5ldHMgPSA0XG5sZXQgcGxhbmV0c1JhZGl1c0RlZiA9IHttaW46IDMsIG1heDogNzB9XG5jb25zdCBwbGFuZXRzTWluRGlzdCA9IDEwXG5jb25zdCBwbGFuZXRCYXNlU3BlZWQgPSA0MFxuXG5jb25zdCBzcGFjZVcgPSAxMDAwMFxuY29uc3Qgc3BhY2VIID0gMTAwMDBcbmNvbnN0IGRlY2FsWCA9IHNwYWNlVyAvIDJcbmNvbnN0IGRlY2FsWSA9IHNwYWNlSCAvIDJcblxuY29uc3QgZ3Jhdml0eVB1bGxCeURlbHRhID0gMVxuY29uc3QgZGlzdFBvdyA9IDVcblxuY29uc3QgZm9udFNpemUgPSAxNFxubGV0IGRlYnVnID0gbnVsbFxuY29uc3QgZWFydGhTcGVlZCA9IDI5Ljc4ICogMTAwMFxuY29uc3QgRyA9IE1hdGgucG93KDEwLCAtMTEpICogNi42NzRcblxuZW51bSBQbGF5TW9kZSB7XG4gICAgUExBWSxcbiAgICBQQVVTRVxufVxuXG5jb25zdCBtb2RlID0gUGxheU1vZGUuUExBWVxuLy8gY29uc3Qga21QZXJQeCA9IDEuM2U1XG5jb25zdCBrbVBlclB4ID0gMS44ZTVcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGdhbWVTcGVlZDogMzY1ICogMjQgKiA2MCAqIDE1LFxuICAgIC8vIGdhbWVTcGVlZDogMTAwLFxuICAgIGttUGVyUHgsXG4gICAgbVBlclB4OiBrbVBlclB4ICogMTAwMCxcbiAgICBrZ1BlclB4RGVuc2l0eTogMTIwMCxcbiAgICBHLFxuICAgIGdyYXZpdHlQdWxsQnlEZWx0YSxcbiAgICBjRHVyYXRpb24sXG4gICAgZnBzLFxuICAgIGRwZixcbiAgICB6b29tTGV2ZWwsXG4gICAgem9vbUFjdGlvblBvdyxcbiAgICBkZWNhbEJ5TW92ZSxcbiAgICBtYXhQbGFuZXRzLFxuICAgIHBsYW5ldHNSYWRpdXNEZWYsXG4gICAgcGxhbmV0c01pbkRpc3QsXG4gICAgcGxhbmV0QmFzZVNwZWVkLFxuICAgIHNwYWNlVyxcbiAgICBzcGFjZUgsXG4gICAgZGVjYWxYLFxuICAgIGRlY2FsWSxcbiAgICBkaXN0UG93LFxuICAgIGZvbnRTaXplLFxuICAgIGRlYnVnLFxuICAgIFBsYXlNb2RlLFxuICAgIG1vZGUsXG4gICAgem9vbU1pbixcbiAgICBlYXJ0aFNwZWVkXG59IiwiaW1wb3J0IEVudGl0eSBmcm9tIFwiLi4vRW50aXR5L0VudGl0eVwiXG5pbXBvcnQgQ29udGV4dCBmcm9tIFwiLi9Db250ZXh0XCJcbmltcG9ydCBDYW1lcmEgZnJvbSBcIi4uL0NhbWVyYS9DYW1lcmFcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXMge1xuICAgIHJlYWRvbmx5IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnRcbiAgICByZWFkb25seSBjb250ZXh0OiBDb250ZXh0XG4gICAgcHVibGljIGVudGl0aWVzOiBFbnRpdHlbXVxuXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGNhbWVyYTogQ2FtZXJhKSB7XG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKVxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodFxuICAgICAgICB0aGlzLmNvbnRleHQgPSBuZXcgQ29udGV4dCh0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksIGNhbWVyYSwgdGhpcylcbiAgICAgICAgdGhpcy5lbnRpdGllcyA9IFtdXG4gICAgfVxuXG4gICAgYXBwZW5kVG8oZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcylcbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZSA9PiB7XG4gICAgICAgICAgICBlLnVwZGF0ZShkZWx0YSlcbiAgICAgICAgICAgIGUuZHJhdyhkZWx0YSwgdGhpcy5jb250ZXh0KVxuICAgICAgICB9KVxuICAgIH1cbn0iLCJpbXBvcnQgQ29udGV4dCBmcm9tIFwiLi4vQ2FudmFzL0NvbnRleHRcIlxuaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuLi9QaHlzaWMvQ29vcmRpbmF0ZXNcIlxuaW1wb3J0IE1vZGVsIGZyb20gXCIuL01vZGVsXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlzYyBpbXBsZW1lbnRzIE1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgY29vcmRzOiBDb29yZGluYXRlcywgcHVibGljIHJhZGl1czogbnVtYmVyLCBwdWJsaWMgY29sb3I6IHN0cmluZykge31cblxuICAgIGRyYXcoY3R4OiBDb250ZXh0KSB7XG4gICAgICAgIGN0eC5hcmModGhpcy5jb29yZHMueCwgdGhpcy5jb29yZHMueSwgdGhpcy5yYWRpdXMsIDAsIDIgKiBNYXRoLlBJKVxuICAgICAgICBjdHguZmlsbCh0aGlzLmNvbG9yKVxuICAgIH1cblxuICAgIGdldENvb3JkaW5hdGVzKCk6IENvb3JkaW5hdGVzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRzXG4gICAgfVxuXG4gICAgc2V0Q29vcmRpbmF0ZXMoY29vcmRzOiBDb29yZGluYXRlcyk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvb3JkcyA9IGNvb3Jkc1xuICAgIH1cbn0iLCJpbXBvcnQgVmVsb2NpdHkgZnJvbSBcIi4vVmVsb2NpdHlcIjtcbmltcG9ydCBQbGFuZXQgZnJvbSBcIi4uL1BsYW5ldFwiXG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4vQ29vcmRpbmF0ZXNcIlxuaW1wb3J0ICogYXMgR2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnlcIlxuaW1wb3J0IENvbmZpZyBmcm9tIFwiLi4vQ29uZmlnXCJcblxuY29uc3QgZ2V0Rm9yY2UgPSAoYTogUGxhbmV0LCBiOiBQbGFuZXQpOiBudW1iZXIgPT4ge1xuICAgIGNvbnN0IGRpc3QgPSBHZW9tZXRyeS5nZXREaXN0YW5jZUJldHdlZW5PYmplY3RzKGEuY29vcmRzLCBiLmNvb3JkcylcbiAgICBpZiAoZGlzdCA9PSAwIHx8IE51bWJlci5pc05hTihkaXN0KSkge1xuICAgICAgICByZXR1cm4gXG4gICAgfVxuICAgIGNvbnN0IEYgPSBDb25maWcuRyAqICgoYS5tYXNzKmIubWFzcykvKGRpc3QqZGlzdCkpXG5cbiAgICByZXR1cm4gRiAqIENvbmZpZy5ncmF2aXR5UHVsbEJ5RGVsdGFcbn1cblxuY29uc3QgZ2V0Rm9yY2VSYXRpbyA9IChkaXJBOiBudW1iZXIsIGRpckI6IG51bWJlciwgY29vcmRBOiBDb29yZGluYXRlcywgY29vcmRCOiBDb29yZGluYXRlcyk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIC0oZGlyQSAtIGRpckIpIC8gKE1hdGguYWJzKGNvb3JkQS54IC0gY29vcmRCLngpICsgTWF0aC5hYnMoY29vcmRBLnkgLSBjb29yZEIueSkpXG59XG5cbmV4cG9ydCBkZWZhdWx0ICh2ZWxvY2l0eTogVmVsb2NpdHksIGE6IFBsYW5ldCwgYjogUGxhbmV0LCBkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgYWNjID0gKGdldEZvcmNlKGEsIGIpIC8gYS5tYXNzKSAvIENvbmZpZy5tUGVyUHhcbiAgICB2ZWxvY2l0eS5hY2NlbGVyYXRlKFxuICAgICAgICBhY2MgKiBnZXRGb3JjZVJhdGlvKGEuY29vcmRzLngsIGIuY29vcmRzLngsIGEuY29vcmRzLCBiLmNvb3JkcyksXG4gICAgICAgIGFjYyAqIGdldEZvcmNlUmF0aW8oYS5jb29yZHMueSwgYi5jb29yZHMueSwgYS5jb29yZHMsIGIuY29vcmRzKSxcbiAgICAgICAgZGVsdGFcbiAgICApXG59IiwiaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuL0Nvb3JkaW5hdGVzXCJcbmltcG9ydCBDb25maWcgZnJvbSBcIi4uL0NvbmZpZ1wiXG5cbmNvbnN0IGdldERpc3RhbmNlQmV0d2Vlbk9iamVjdHMgPSAoYTogQ29vcmRpbmF0ZXMsIGI6IENvb3JkaW5hdGVzKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gKE1hdGguYWJzKGIueCAtIGEueCkgKyBNYXRoLmFicyhiLnkgLSBhLnkpKSAqIENvbmZpZy5tUGVyUHhcbn1cblxuZXhwb3J0IHtcbiAgICBnZXREaXN0YW5jZUJldHdlZW5PYmplY3RzXG59IiwiaW1wb3J0IEVudGl0eSBmcm9tIFwiLi9FbnRpdHkvRW50aXR5XCJcbmltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi9QaHlzaWMvQ29vcmRpbmF0ZXNcIlxuaW1wb3J0IENvbnRleHQgZnJvbSBcIi4vQ2FudmFzL0NvbnRleHRcIlxuaW1wb3J0IERpc2MgZnJvbSBcIi4vTW9kZWwvRGlzY1wiXG5pbXBvcnQgVmVsb2NpdHkgZnJvbSBcIi4vUGh5c2ljL1ZlbG9jaXR5XCJcbmltcG9ydCBhcHBseUdyYXZpdHkgZnJvbSBcIi4vUGh5c2ljL0dyYXZpdHlcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGFuZXQgaW1wbGVtZW50cyBFbnRpdHkge1xuICAgIHB1YmxpYyBlbnRpdGllczogRW50aXR5W10gPSBbXVxuICAgIHB1YmxpYyBtb2RlbDogRGlzY1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpZDogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgY29vcmRzOiBDb29yZGluYXRlcyxcbiAgICAgICAgcmVhZG9ubHkgcmFkaXVzOiBudW1iZXIsXG4gICAgICAgIHJlYWRvbmx5IG1hc3M6IG51bWJlcixcbiAgICAgICAgcmVhZG9ubHkgY29sb3I6IHN0cmluZyxcbiAgICAgICAgcHVibGljIHZlbG9jaXR5OiBWZWxvY2l0eSxcbiAgICAgICAgcmVhZG9ubHkgcGxhbmV0czogUGxhbmV0W11cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gbmV3IERpc2ModGhpcy5jb29yZHMsIHRoaXMucmFkaXVzLCB0aGlzLmNvbG9yKVxuICAgICAgICB9XG5cbiAgICBnZXRFbnRpdGllcygpOiBFbnRpdHlbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzXG4gICAgfVxuXG4gICAgdXBkYXRlKGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLnBsYW5ldHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSB0aGlzLnBsYW5ldHNbaV1cblxuICAgICAgICAgICAgaWYgKHAuaWQgPT0gdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcHBseUdyYXZpdHkodGhpcy52ZWxvY2l0eSwgdGhpcywgcCwgZGVsdGEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52ZWxvY2l0eS5hcHBseSh0aGlzLmNvb3JkcywgZGVsdGEpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaWQsIHRoaXMuY29vcmRzKVxuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZSA9PiBlLnVwZGF0ZShkZWx0YSkpXG4gICAgfVxuXG4gICAgZHJhdyhkZWx0YTogbnVtYmVyLCBjb250ZXh0OiBDb250ZXh0KTogdm9pZCB7XG4gICAgICAgIGNvbnRleHQuZHJhdyh0aGlzLm1vZGVsKVxuICAgIH1cblxuICAgIGdldENvb3JkaW5hdGVzKCk6IENvb3JkaW5hdGVzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRzXG4gICAgfVxuXG4gICAgc2V0Q29vcmRpbmF0ZXMoY29vcmRzOiBDb29yZGluYXRlcyk6IHZvaWQge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhjb29yZHMpXG4gICAgICAgIHRoaXMuY29vcmRzID0gY29vcmRzXG4gICAgICAgIC8vIHRoaXMubW9kZWwuc2V0Q29vcmRpbmF0ZXModGhpcy5jb29yZHMpXG4gICAgfVxufSIsImltcG9ydCBFbnRpdHkgZnJvbSBcIi4uL0VudGl0eS9FbnRpdHlcIlxuaW1wb3J0IENvbnRleHQgZnJvbSBcIi4uL0NhbnZhcy9Db250ZXh0XCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NlbmUgaW1wbGVtZW50cyBFbnRpdHkge1xuICAgIHB1YmxpYyBlbnRpdGllczogRW50aXR5W10gPSBbXVxuXG4gICAgdXBkYXRlKGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGUgPT4gZS51cGRhdGUoZGVsdGEpKVxuICAgIH1cblxuICAgIGRyYXcoZGVsdGE6IG51bWJlciwgY29udGV4dDogQ29udGV4dCk6IHZvaWQge1xuICAgICAgICBjb250ZXh0LmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNvbnRleHQuY2FudmFzLmNhbnZhcy53aWR0aCwgY29udGV4dC5jYW52YXMuY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNvbnRleHQuY2FudmFzLmNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiMwMDAwMDBcIlxuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZSA9PiBlLmRyYXcoZGVsdGEsIGNvbnRleHQpKVxuICAgICAgICBjb250ZXh0LmNvbnRleHQuc3Ryb2tlKCk7ICAgIFxuICAgIH1cblxuICAgIGdldEVudGl0aWVzKCk6IEVudGl0eVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXNcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FtZXJhIHtcbiAgICBwdWJsaWMgeDogbnVtYmVyID0gMFxuICAgIHB1YmxpYyB5OiBudW1iZXIgPSAwXG4gICAgcHVibGljIHo6IG51bWJlciA9IDFcblxuICAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy54ID0geFxuICAgICAgICB0aGlzLnkgPSB5XG4gICAgICAgIHRoaXMueiA9IHpcbiAgICB9XG5cbiAgICBYKHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnpUcmFuc2Zvcm0oeCAtIHRoaXMueClcbiAgICB9XG5cbiAgICBZKHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnpUcmFuc2Zvcm0oeSAtIHRoaXMueSlcbiAgICB9XG5cbiAgICB6VHJhbnNmb3JtKHY6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB2ICogKDEgLyB0aGlzLnopXG4gICAgfVxuXG4gICAgcmVsYXRpdmVYKHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKyB4XG4gICAgfVxuXG4gICAgcmVsYXRpdmVZKHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnkgKyB5XG4gICAgfVxufSIsImltcG9ydCBDYW1lcmEgZnJvbSBcIi4uL0NhbWVyYS9DYW1lcmFcIlxuaW1wb3J0IENvbmZpZyBmcm9tIFwiLi4vQ29uZmlnXCJcbmltcG9ydCBDYW52YXMgZnJvbSBcIi4uL0NhbnZhcy9DYW52YXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLZXlib2FyZCB7XG4gICAgcHVibGljIGFjdGlvbkJ5S2V5Y29kZToge1trZXk6IG51bWJlcl06IEZ1bmN0aW9ufVxuXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgY2FtZXJhOiBDYW1lcmEsIHJlYWRvbmx5IGNhbnZhczogQ2FudmFzKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uQnlLZXljb2RlID0ge1xuICAgICAgICAgICAgLy8gNjg6ICgpID0+IHtkZWJ1Zy5Ub2dnbGUoKTt9LFxuICAgICAgICAgICAgLy8gODM6ICgpID0+IHttb2RlID0gbW9kZSA9PSBQQVVTRSA/IFBMQVkgOiBQQVVTRTt9LFxuICAgICAgICAgICAgODI6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS54ID0gMFxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnkgPSAwXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueiA9IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA5MDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS56IDw9IENvbmZpZy56b29tTWluKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS56IC09IENvbmZpZy56b29tQWN0aW9uUG93XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgODg6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS56ICs9IENvbmZpZy56b29tQWN0aW9uUG93XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMzc6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueCAtIENvbmZpZy5kZWNhbEJ5TW92ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueCAtPSBDb25maWcuZGVjYWxCeU1vdmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAzODogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS55IC0gQ29uZmlnLmRlY2FsQnlNb3ZlIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS55IC09IENvbmZpZy5kZWNhbEJ5TW92ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDM5OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnggPj0gQ29uZmlnLnNwYWNlVykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnggKz0gQ29uZmlnLmRlY2FsQnlNb3ZlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgNDA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueSA+PSBDb25maWcuc3BhY2VIKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueSArPSBDb25maWcuZGVjYWxCeU1vdmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleWJvYXJkKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGlvbkJ5S2V5Y29kZSA9PSB1bmRlZmluZWQgfHwgXG4gICAgICAgICAgICAhdGhpcy5hY3Rpb25CeUtleWNvZGVbZXZlbnQua2V5Q29kZV0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGlvbkJ5S2V5Y29kZVtldmVudC5rZXlDb2RlXSgpO1xuICAgIH1cbn0iLCJpbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSBcIi4vQ29vcmRpbmF0ZXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWxvY2l0eSB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlcikge31cblxuICAgIGFjY2VsZXJhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIsIGRlbHRhOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy54ICs9IHggKiBkZWx0YVxuICAgICAgICB0aGlzLnkgKz0geSAqIGRlbHRhXG4gICAgfVxuXG4gICAgYXBwbHkob2JqOiBDb29yZGluYXRlcywgZGVsdGE6IG51bWJlcikge1xuICAgICAgICBvYmoueCArPSB0aGlzLnggKiBkZWx0YVxuICAgICAgICBvYmoueSArPSB0aGlzLnkgKiBkZWx0YVxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb29yZGluYXRlcyB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlcikge31cblxuICAgIHNldENvb3JkaW5hdGVzKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgIH1cbn0iLCJpbXBvcnQgQ2FudmFzIGZyb20gXCIuL3NyYy9DYW52YXMvQ2FudmFzXCJcbmltcG9ydCBQbGFuZXQgZnJvbSBcIi4vc3JjL1BsYW5ldFwiXG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4vc3JjL1NjZW5lL2luZGV4XCJcbmltcG9ydCBDYW1lcmEgZnJvbSBcIi4vc3JjL0NhbWVyYS9DYW1lcmFcIlxuaW1wb3J0IEtleWJvYXJkIGZyb20gXCIuL3NyYy9Db250cm9scy9LZXlib2FyZFwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuL3NyYy9Db25maWdcIlxuaW1wb3J0IFZlbG9jaXR5IGZyb20gXCIuL3NyYy9QaHlzaWMvVmVsb2NpdHlcIlxuaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuL3NyYy9QaHlzaWMvQ29vcmRpbmF0ZXNcIlxuXG5pbXBvcnQgZ2V0UGxhbmV0cyBmcm9tIFwiLi9wbGFuZXRzXCJcblxubGV0IGNUaW1lID0gMFxubGV0IHBsYXkgPSBmYWxzZVxuXG5jb25zdCBtYWluID0gKHQxOiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIGJvYXJkOiBDYW52YXMpID0+IHtcbiAgICAvLyBjVGltZSArPSBkZWx0YVxuICAgIC8vIGlmIChjVGltZSA+IENvbmZpZy5kcGYpIHtcbiAgICAgICAgYm9hcmQuY29udGV4dC5jb250ZXh0LmZvbnQgPSBcIjMwcHggVmVyZGFuYVwiO1xuICAgICAgICBib2FyZC51cGRhdGUoKGRlbHRhIC8gMTAwMCkgKiBDb25maWcuZ2FtZVNwZWVkKVxuICAgICAgICBpZiAocGxheSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgYm9hcmQuY29udGV4dC5jb250ZXh0LmZpbGxUZXh0KFwiSGV5IENodWNrISDwn6SYXCIsIGJvYXJkLmNhbnZhcy53aWR0aCAvIDIgLSAxMDAsIDMwKTtcbiAgICAgICAgICAgIGJvYXJkLmNvbnRleHQuY29udGV4dC5maWxsVGV4dChcIvCfpJggQ2xpcXVlIG1vaSBkZXNzdXMg8J+kmFwiLCBib2FyZC5jYW52YXMud2lkdGggLyAyIC0gMTY1LCA2MCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjVGltZSAtPSBDb25maWcuZHBmXG4gICAgLy8gfVxuXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0ID0+IG1haW4odCwgdCAtIHQxLCBib2FyZCkpXG59XG5cbmRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBDYW1lcmEoQ29uZmlnLnNwYWNlVyAvIDIsIENvbmZpZy5zcGFjZUggLyAyLCBDb25maWcuem9vbUxldmVsKVxuICAgIGNvbnN0IGJvYXJkID0gbmV3IENhbnZhcyhkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCwgY2FtZXJhKVxuICAgIGJvYXJkLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpXG4gICAgXG4gICAgY29uc3Qgc2NlbmUgPSBuZXcgU2NlbmUoKVxuICAgIGNvbnN0IGtleWJvYXJkQ29udHJvbHMgPSBuZXcgS2V5Ym9hcmQoY2FtZXJhLCBib2FyZClcbiAgICBjb25zdCBwbGFuZXRzQ29uZmlnID0gZ2V0UGxhbmV0cyhib2FyZCwgY2FtZXJhKVxuICAgIGxldCBwbGFuZXRzOiBQbGFuZXRbXSA9IFtdXG5cbiAgICBib2FyZC5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgKGUpID0+IHtcbiAgICAgICAgY29uc3QgYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdWRpb1wiKVxuICAgICAgICBpZiAocGxheSA9PSBmYWxzZSl7XG4gICAgICAgICAgICBhdWRpby5wbGF5KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF1ZGlvLnBhdXNlKClcbiAgICAgICAgfVxuICAgICAgICBwbGF5ID0gIXBsYXlcbiAgICB9KVxuICAgIFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGtleWJvYXJkQ29udHJvbHMuaGFuZGxlS2V5Ym9hcmQuYmluZChrZXlib2FyZENvbnRyb2xzKSk7XG4gICAgXG4gICAgZm9yIChsZXQgaSBpbiBwbGFuZXRzQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwbGFuZXRzQ29uZmlnW2ldXG4gICAgICAgIHBsYW5ldHMucHVzaChuZXcgUGxhbmV0KGksXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZXMocC54LCBwLnkpLFxuICAgICAgICAgICAgcC5yYWRpdXMsXG4gICAgICAgICAgICBwLm1hc3MsXG4gICAgICAgICAgICBwLmNvbG9yLFxuICAgICAgICAgICAgbmV3IFZlbG9jaXR5KHAudmVsb2NpdHlbMF0sIHAudmVsb2NpdHlbMV0pLFxuICAgICAgICAgICAgcGxhbmV0c1xuICAgICAgICAgICAgKSlcbiAgICB9XG5cbiAgICBzY2VuZS5lbnRpdGllcyA9IHBsYW5ldHNcbiAgICBib2FyZC5lbnRpdGllcy5wdXNoKHNjZW5lKVxuICAgIFxuICAgIG1haW4oMCwgMCwgYm9hcmQpXG4gfSIsImltcG9ydCBDYW52YXMgZnJvbSBcIi4vc3JjL0NhbnZhcy9DYW52YXNcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi9zcmMvQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgQ29uZmlnIGZyb20gXCIuL3NyYy9Db25maWdcIlxuXG5leHBvcnQgZGVmYXVsdCAoY2FudmFzOiBDYW52YXMsIGNhbWVyYTogQ2FtZXJhKToge1trZXk6IHN0cmluZ106IGFueX0gPT4ge1xuICAgIGNvbnN0IHN1biA9IHtcbiAgICAgICAgeDogY2FtZXJhLnJlbGF0aXZlWChjYW1lcmEueiAqIChjYW52YXMuY2FudmFzLndpZHRoIC8gMikpLFxuICAgICAgICB5OiBjYW1lcmEucmVsYXRpdmVZKGNhbWVyYS56ICogKGNhbnZhcy5jYW52YXMuaGVpZ2h0IC8gMikpLFxuICAgICAgICByYWRpdXM6IDEyMCxcbiAgICAgICAgbWFzczogMS45ODkxZTMwLFxuICAgICAgICBjb2xvcjogXCJvcmFuZ2VcIixcbiAgICAgICAgdmVsb2NpdHk6IFswLCAwXVxuICAgIH1cbiAgICBjb25zdCBlYXJ0aCA9IHtcbiAgICAgICAgeDogc3VuLnggLSAoMTQ5Ljk2ZTkgLyBDb25maWcubVBlclB4KSxcbiAgICAgICAgeTogc3VuLnksXG4gICAgICAgIHJhZGl1czogMzAsXG4gICAgICAgIG1hc3M6IDUuOTcyZTI0LFxuICAgICAgICBjb2xvcjogXCJza3libHVlXCIsXG4gICAgICAgIHZlbG9jaXR5OiBbKENvbmZpZy5lYXJ0aFNwZWVkIC8gQ29uZmlnLm1QZXJQeCkgKiAxLzMsIChDb25maWcuZWFydGhTcGVlZCAvIENvbmZpZy5tUGVyUHgpICogMi8zXVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJzdW40MVwiOiBzdW4sXG4gICAgICAgICAgICBcImVhcnRoIGFsb3JzXCI6IGVhcnRoLFxuICAgICAgICAgICAgXCJpbnRlcmxvcGVyXCI6IHtcbiAgICAgICAgICAgICAgICB4OiBzdW4ueCArICgxMDAuOTZlOSAvIENvbmZpZy5tUGVyUHgpLFxuICAgICAgICAgICAgICAgIHk6IHN1bi55ICsgMjAsXG4gICAgICAgICAgICAgICAgcmFkaXVzOiAyNCxcbiAgICAgICAgICAgICAgICBtYXNzOiAzLjk3MmUyNCxcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJyZWRcIixcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eTogWyhDb25maWcuZWFydGhTcGVlZCAvIENvbmZpZy5tUGVyUHgpICogMS8zLCAoQ29uZmlnLmVhcnRoU3BlZWQgLyBDb25maWcubVBlclB4KSAqIDIvM11cbiAgICAgICAgICAgIH1cbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==