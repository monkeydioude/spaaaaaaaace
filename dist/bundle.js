!function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var i,o=function(){function t(t,n,e){this.context=t,this.camera=n,this.canvas=e}return t.prototype.draw=function(t){this.context.beginPath(),t.draw(this),this.context.stroke()},t.prototype.arc=function(t,n,e,i,o){return this.context.arc(this.camera.X(t),this.camera.Y(n),this.camera.zTransform(e),i,o),this},t.prototype.fill=function(t){return this.context.fillStyle=t,this.context.fill(),this},t}(),r=function(){function t(t,n,e){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.context=new o(this.canvas.getContext("2d"),e,this),this.entities=[]}return t.prototype.appendTo=function(t){t.appendChild(this.canvas)},t.prototype.update=function(t){var n=this;this.entities.forEach((function(e){e.update(t),e.draw(t,n.context)}))},t}(),a=function(){function t(t,n,e,i){this.x=t,this.y=n,this.radius=e,this.color=i}return t.prototype.draw=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(this.color)},t}(),c=function(){function t(t,n,e,i,o,r){this.id=t,this.x=n,this.y=e,this.radius=i,this.color=o,this.velocity=r,this.entities=[],this.model=new a(this.x,this.y,this.radius,this.color)}return t.prototype.getEntities=function(){return this.entities},t.prototype.update=function(t){this.entities.forEach((function(n){return n.update(t)}))},t.prototype.draw=function(t,n){n.draw(this.model)},t}(),s=function(){function t(){this.entities=[]}return t.prototype.update=function(t){this.entities.forEach((function(n){return n.update(t)}))},t.prototype.draw=function(t,n){n.context.clearRect(0,0,n.canvas.canvas.width,n.canvas.canvas.height),n.canvas.canvas.style.backgroundColor="#000000",this.entities.forEach((function(e){return e.draw(t,n)}))},t.prototype.getEntities=function(){return this.entities},t}(),u=function(){function t(t,n,e){this.x=0,this.y=0,this.z=1,this.x=t,this.y=n,this.z=e}return t.prototype.X=function(t){return this.zTransform(t-this.x)},t.prototype.Y=function(t){return this.zTransform(t-this.y)},t.prototype.zTransform=function(t){return t*(1/this.z)},t}();Math.pow(10,-11);!function(t){t[t.PLAY=0]="PLAY",t[t.PAUSE=1]="PAUSE"}(i||(i={}));i.PLAY;var h=1.2,f=.1,d=25,y=1e4,p=1e4,l=.1,m=function(){function t(t,n){var e=this;this.camera=t,this.canvas=n,this.actionByKeycode={82:function(){e.camera.x=0,e.camera.y=0,e.camera.z=1},90:function(){e.camera.z<=l||(e.camera.z-=f)},88:function(){e.camera.z+=f},37:function(){e.camera.x-d<=0||(e.camera.x-=d)},38:function(){e.camera.y-d<=0||(e.camera.y-=d)},39:function(){e.camera.x>=y||(e.camera.x+=d)},40:function(){e.camera.y>=p||(e.camera.y+=d)}}}return t.prototype.handleKeyboard=function(t){null!=this.actionByKeycode&&this.actionByKeycode[t.keyCode]&&this.actionByKeycode[t.keyCode]()},t}(),v=function(t,n,e){e.update(n),window.requestAnimationFrame((function(n){return v(n,n-t,e)}))};document.onreadystatechange=function(t){if("complete"==document.readyState){var n=new u(y/2,p/2,h),e=new r(document.body.clientWidth,document.body.clientHeight,n);e.appendTo(document.body);var i=new s,o=new m(n,e),a=function(t,n){return{1:{x:n.X(t.canvas.width/2+120),y:n.Y(t.canvas.width/2+120),radius:120,color:"#ffffff",velocity:[0,0]},2:{x:n.X(t.canvas.width/3+80),y:n.Y(t.canvas.height/4+80),radius:80,color:"#784573",velocity:[0,0]}}}(e,n);for(var f in document.querySelector("body").addEventListener("keydown",o.handleKeyboard.bind(o)),a){var d=a[f];i.entities.push(new c(f,d.x,d.y,d.radius,d.color,d.velocity))}e.entities.push(i),v(0,0,e)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9Db250ZXh0LnRzIiwid2VicGFjazovLy8uL3NyYy9Db25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhcy9DYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVsL0Rpc2MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BsYW5ldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2NlbmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbWVyYS9DYW1lcmEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xzL0tleWJvYXJkLnRzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL3BsYW5ldHMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJQbGF5TW9kZSIsImNvbnRleHQiLCJjYW1lcmEiLCJjYW52YXMiLCJkcmF3IiwibW9kZWwiLCJ0aGlzIiwiYmVnaW5QYXRoIiwic3Ryb2tlIiwiYXJjIiwieCIsInkiLCJhcyIsImFlIiwiWCIsIlkiLCJ6VHJhbnNmb3JtIiwiZmlsbCIsImNvbG9yIiwiZmlsbFN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRDb250ZXh0IiwiZW50aXRpZXMiLCJhcHBlbmRUbyIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInVwZGF0ZSIsImRlbHRhIiwiZm9yRWFjaCIsImUiLCJyYWRpdXMiLCJjdHgiLCJNYXRoIiwiUEkiLCJpZCIsInZlbG9jaXR5IiwiZ2V0RW50aXRpZXMiLCJjbGVhclJlY3QiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInoiLCJ2IiwicG93IiwiUExBWSIsImFjdGlvbkJ5S2V5Y29kZSIsIjgyIiwiOTAiLCJDb25maWciLCI4OCIsIjM3IiwiMzgiLCIzOSIsIjQwIiwiaGFuZGxlS2V5Ym9hcmQiLCJldmVudCIsInVuZGVmaW5lZCIsImtleUNvZGUiLCJtYWluIiwidDEiLCJib2FyZCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJib2R5IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzY2VuZSIsImtleWJvYXJkQ29udHJvbHMiLCJwbGFuZXRzIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJwdXNoIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVB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QUZUc0QsU0FBU21ELGNBQWMsUUFBUUMsaUJBQWlCLFVBQVdILEVBQWlCZixlQUFlaEUsS0FBSytFLElBRWxGQyxFQUFTLENBQ25CLElBQU0xRSxFQUFJMEUsRUFBUXhHLEdBQ2xCc0csRUFBTTdDLFNBQVNrRCxLQUFLLElBQUksRUFBTzNHLEVBQUc4QixFQUFFWSxFQUFHWixFQUFFYSxFQUFHYixFQUFFbUMsT0FBUW5DLEVBQUVvQixNQUFPcEIsRUFBRXdDLFdBTXJFd0IsRUFBTXJDLFNBQVNrRCxLQUFLTCxHQUVwQlYsRUFBSyxFQUFHLEVBQUdFIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBNb2RlbCBmcm9tIFwiLi4vTW9kZWwvTW9kZWxcIlxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi4vQ2FtZXJhL0NhbWVyYVwiXG5pbXBvcnQgQ2FudmFzIGZyb20gXCIuL0NhbnZhc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgcmVhZG9ubHkgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICByZWFkb25seSBjYW1lcmE6IENhbWVyYSxcbiAgICAgICAgcmVhZG9ubHkgY2FudmFzOiBDYW52YXMsXG4gICAgICAgICkge31cblxuICAgIGRyYXcobW9kZWw6IE1vZGVsKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKVxuICAgICAgICBtb2RlbC5kcmF3KHRoaXMpXG4gICAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKVxuICAgIH1cblxuICAgIGFyYyh4OiBudW1iZXIsIHk6IG51bWJlciwgcjogbnVtYmVyLCBhczogbnVtYmVyLCBhZTogbnVtYmVyKTogQ29udGV4dCB7XG4gICAgICAgIHRoaXMuY29udGV4dC5hcmModGhpcy5jYW1lcmEuWCh4KSwgdGhpcy5jYW1lcmEuWSh5KSwgdGhpcy5jYW1lcmEuelRyYW5zZm9ybShyKSwgYXMsIGFlKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIGZpbGwoY29sb3I6IHN0cmluZyk6IENvbnRleHQge1xuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gY29sb3JcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGwoKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbn1cblxudHlwZSBEcmF3RnVuY3Rpb24gPSAoY3R4OiBDb250ZXh0KSA9PiB2b2lkXG5cbmV4cG9ydCB7XG4gICAgRHJhd0Z1bmN0aW9uXG59IiwiY29uc3QgY0R1cmF0aW9uID0gMFxuY29uc3QgZnBzID0gNjBcbmNvbnN0IGRwZiA9IDEgLyBmcHNcbmxldCBjYW52YXMgPSBudWxsXG5sZXQgY3R4ID0gbnVsbFxubGV0IHpvb21MZXZlbCA9IDEuMlxubGV0IHpvb21NaW4gPSAwLjFcbmNvbnN0IHpvb21BY3Rpb25Qb3cgPSAwLjEwXG5jb25zdCBkZWNhbEJ5TW92ZSA9IDI1XG5cbmxldCBtYXhQbGFuZXRzID0gNFxubGV0IHBsYW5ldHNSYWRpdXNEZWYgPSB7bWluOiAzLCBtYXg6IDcwfVxuY29uc3QgcGxhbmV0c01pbkRpc3QgPSAxMFxuY29uc3QgcGxhbmV0QmFzZVNwZWVkID0gNDBcblxuY29uc3Qgc3BhY2VXID0gMTAwMDBcbmNvbnN0IHNwYWNlSCA9IDEwMDAwXG5jb25zdCBkZWNhbFggPSBzcGFjZVcgLyAyXG5jb25zdCBkZWNhbFkgPSBzcGFjZUggLyAyXG5cbmNvbnN0IEcgPSBNYXRoLnBvdygxMCwgLTExKSAqIDYuNjc0XG5jb25zdCBncmF2aXR5UHVsbEJ5RGVsdGEgPSA3XG5jb25zdCBkaXN0UG93ID0gNVxuXG5jb25zdCBmb250U2l6ZSA9IDE0XG5sZXQgZGVidWcgPSBudWxsXG5cbmVudW0gUGxheU1vZGUge1xuICAgIFBMQVksXG4gICAgUEFVU0Vcbn1cblxuY29uc3QgbW9kZSA9IFBsYXlNb2RlLlBMQVlcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGttUGVyUHg6IDEzMDAwMCxcbiAgICBrZ1BlclB4RGVuc2l0eTogMTIwMCxcbiAgICBHLFxuICAgIGdyYXZpdHlQdWxsQnlEZWx0YSxcbiAgICBjRHVyYXRpb24sXG4gICAgZnBzLFxuICAgIGRwZixcbiAgICBjYW52YXMsXG4gICAgY3R4LFxuICAgIHpvb21MZXZlbCxcbiAgICB6b29tQWN0aW9uUG93LFxuICAgIGRlY2FsQnlNb3ZlLFxuICAgIG1heFBsYW5ldHMsXG4gICAgcGxhbmV0c1JhZGl1c0RlZixcbiAgICBwbGFuZXRzTWluRGlzdCxcbiAgICBwbGFuZXRCYXNlU3BlZWQsXG4gICAgc3BhY2VXLFxuICAgIHNwYWNlSCxcbiAgICBkZWNhbFgsXG4gICAgZGVjYWxZLFxuICAgIGRpc3RQb3csXG4gICAgZm9udFNpemUsXG4gICAgZGVidWcsXG4gICAgUGxheU1vZGUsXG4gICAgbW9kZSxcbiAgICB6b29tTWluXG59IiwiaW1wb3J0IEVudGl0eSBmcm9tIFwiLi4vRW50aXR5L0VudGl0eVwiXG5pbXBvcnQgQ29udGV4dCBmcm9tIFwiLi9Db250ZXh0XCJcbmltcG9ydCBDYW1lcmEgZnJvbSBcIi4uL0NhbWVyYS9DYW1lcmFcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXMge1xuICAgIHJlYWRvbmx5IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnRcbiAgICByZWFkb25seSBjb250ZXh0OiBDb250ZXh0XG4gICAgcHVibGljIGVudGl0aWVzOiBFbnRpdHlbXVxuXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGNhbWVyYTogQ2FtZXJhKSB7XG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKVxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodFxuICAgICAgICB0aGlzLmNvbnRleHQgPSBuZXcgQ29udGV4dCh0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksIGNhbWVyYSwgdGhpcylcbiAgICAgICAgdGhpcy5lbnRpdGllcyA9IFtdXG4gICAgfVxuXG4gICAgYXBwZW5kVG8oZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcylcbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZSA9PiB7XG4gICAgICAgICAgICBlLnVwZGF0ZShkZWx0YSlcbiAgICAgICAgICAgIGUuZHJhdyhkZWx0YSwgdGhpcy5jb250ZXh0KVxuICAgICAgICB9KVxuICAgIH1cbn0iLCJpbXBvcnQgQ29udGV4dCBmcm9tIFwiLi4vQ2FudmFzL0NvbnRleHRcIlxuaW1wb3J0IE1vZGVsIGZyb20gXCIuL01vZGVsXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlzYyBpbXBsZW1lbnRzIE1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyLCBwdWJsaWMgcmFkaXVzOiBudW1iZXIsIHB1YmxpYyBjb2xvcjogc3RyaW5nKSB7fVxuXG4gICAgZHJhdyhjdHg6IENvbnRleHQpIHtcbiAgICAgICAgY3R4LmFyYyh0aGlzLngsIHRoaXMueSwgdGhpcy5yYWRpdXMsIDAsIDIgKiBNYXRoLlBJKVxuICAgICAgICBjdHguZmlsbCh0aGlzLmNvbG9yKVxuICAgIH1cbn0iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuL0VudGl0eS9FbnRpdHlcIlxuaW1wb3J0IENvbnRleHQgZnJvbSBcIi4vQ2FudmFzL0NvbnRleHRcIlxuaW1wb3J0IERpc2MgZnJvbSBcIi4vTW9kZWwvRGlzY1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYW5ldCBpbXBsZW1lbnRzIEVudGl0eSB7XG4gICAgcHVibGljIGVudGl0aWVzOiBFbnRpdHlbXSA9IFtdXG4gICAgcHVibGljIG1vZGVsOiBEaXNjXG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGlkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyB4OiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyB5OiBudW1iZXIsXG4gICAgICAgIHJlYWRvbmx5IHJhZGl1czogbnVtYmVyLFxuICAgICAgICByZWFkb25seSBjb2xvcjogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgdmVsb2NpdHk6IGFueVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSBuZXcgRGlzYyh0aGlzLngsIHRoaXMueSwgdGhpcy5yYWRpdXMsIHRoaXMuY29sb3IpXG4gICAgICAgIH1cblxuICAgIGdldEVudGl0aWVzKCk6IEVudGl0eVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXNcbiAgICB9XG5cbiAgICB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZSA9PiBlLnVwZGF0ZShkZWx0YSkpXG4gICAgfVxuXG4gICAgZHJhdyhkZWx0YTogbnVtYmVyLCBjb250ZXh0OiBDb250ZXh0KTogdm9pZCB7XG4gICAgICAgIGNvbnRleHQuZHJhdyh0aGlzLm1vZGVsKVxuICAgIH1cbn0iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuLi9FbnRpdHkvRW50aXR5XCJcbmltcG9ydCBDb250ZXh0IGZyb20gXCIuLi9DYW52YXMvQ29udGV4dFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5lIGltcGxlbWVudHMgRW50aXR5IHtcbiAgICBwdWJsaWMgZW50aXRpZXM6IEVudGl0eVtdID0gW11cblxuICAgIHVwZGF0ZShkZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlID0+IGUudXBkYXRlKGRlbHRhKSlcbiAgICB9XG5cbiAgICBkcmF3KGRlbHRhOiBudW1iZXIsIGNvbnRleHQ6IENvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgY29udGV4dC5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjb250ZXh0LmNhbnZhcy5jYW52YXMud2lkdGgsIGNvbnRleHQuY2FudmFzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBjb250ZXh0LmNhbnZhcy5jYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjMDAwMDAwXCJcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGUgPT4gZS5kcmF3KGRlbHRhLCBjb250ZXh0KSlcbiAgICB9XG5cbiAgICBnZXRFbnRpdGllcygpOiBFbnRpdHlbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbWVyYSB7XG4gICAgcHVibGljIHg6IG51bWJlciA9IDBcbiAgICBwdWJsaWMgeTogbnVtYmVyID0gMFxuICAgIHB1YmxpYyB6OiBudW1iZXIgPSAxXG5cbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgICAgICB0aGlzLnogPSB6XG4gICAgfVxuXG4gICAgWCh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy56VHJhbnNmb3JtKHggLSB0aGlzLngpXG4gICAgfVxuXG4gICAgWSh5OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy56VHJhbnNmb3JtKHkgLSB0aGlzLnkpXG4gICAgfVxuXG4gICAgelRyYW5zZm9ybSh2OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdiAqICgxIC8gdGhpcy56KVxuICAgIH1cbn0iLCJpbXBvcnQgQ2FtZXJhIGZyb20gXCIuLi9DYW1lcmEvQ2FtZXJhXCJcbmltcG9ydCBDb25maWcgZnJvbSBcIi4uL0NvbmZpZ1wiXG5pbXBvcnQgQ2FudmFzIGZyb20gXCIuLi9DYW52YXMvQ2FudmFzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5Ym9hcmQge1xuICAgIHB1YmxpYyBhY3Rpb25CeUtleWNvZGU6IHtba2V5OiBudW1iZXJdOiBGdW5jdGlvbn1cblxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGNhbWVyYTogQ2FtZXJhLCByZWFkb25seSBjYW52YXM6IENhbnZhcykge1xuICAgICAgICB0aGlzLmFjdGlvbkJ5S2V5Y29kZSA9IHtcbiAgICAgICAgICAgIC8vIDY4OiAoKSA9PiB7ZGVidWcuVG9nZ2xlKCk7fSxcbiAgICAgICAgICAgIC8vIDgzOiAoKSA9PiB7bW9kZSA9IG1vZGUgPT0gUEFVU0UgPyBQTEFZIDogUEFVU0U7fSxcbiAgICAgICAgICAgIDgyOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueCA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS55ID0gMFxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnogPSAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgOTA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueiA8PSBDb25maWcuem9vbU1pbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueiAtPSBDb25maWcuem9vbUFjdGlvblBvd1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDg4OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueiArPSBDb25maWcuem9vbUFjdGlvblBvd1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDM3OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnggLSBDb25maWcuZGVjYWxCeU1vdmUgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnggLT0gQ29uZmlnLmRlY2FsQnlNb3ZlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMzg6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEueSAtIENvbmZpZy5kZWNhbEJ5TW92ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueSAtPSBDb25maWcuZGVjYWxCeU1vdmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAzOTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS54ID49IENvbmZpZy5zcGFjZVcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS54ICs9IENvbmZpZy5kZWNhbEJ5TW92ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDQwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLnkgPj0gQ29uZmlnLnNwYWNlSCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnkgKz0gQ29uZmlnLmRlY2FsQnlNb3ZlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlib2FyZChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5hY3Rpb25CeUtleWNvZGUgPT0gdW5kZWZpbmVkIHx8IFxuICAgICAgICAgICAgIXRoaXMuYWN0aW9uQnlLZXljb2RlW2V2ZW50LmtleUNvZGVdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3Rpb25CeUtleWNvZGVbZXZlbnQua2V5Q29kZV0oKTtcbiAgICB9XG59IiwiaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9zcmMvQ2FudmFzL0NhbnZhc1wiXG5pbXBvcnQgUGxhbmV0IGZyb20gXCIuL3NyYy9QbGFuZXRcIlxuaW1wb3J0IFNjZW5lIGZyb20gXCIuL3NyYy9TY2VuZS9pbmRleFwiXG5pbXBvcnQgQ2FtZXJhIGZyb20gXCIuL3NyYy9DYW1lcmEvQ2FtZXJhXCJcbmltcG9ydCBLZXlib2FyZCBmcm9tIFwiLi9zcmMvQ29udHJvbHMvS2V5Ym9hcmRcIlxuaW1wb3J0IENvbmZpZyBmcm9tIFwiLi9zcmMvQ29uZmlnXCJcbmltcG9ydCBnZXRQbGFuZXRzIGZyb20gXCIuL3BsYW5ldHNcIlxuXG5jb25zdCBtYWluID0gKHQxOiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIGJvYXJkOiBDYW52YXMpID0+IHtcbiAgICBib2FyZC51cGRhdGUoZGVsdGEpXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0ID0+IG1haW4odCwgdCAtIHQxLCBib2FyZCkpXG59XG5cbmRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjYW1lcmEgPSBuZXcgQ2FtZXJhKENvbmZpZy5zcGFjZVcgLyAyLCBDb25maWcuc3BhY2VIIC8gMiwgQ29uZmlnLnpvb21MZXZlbClcbiAgICBjb25zdCBib2FyZCA9IG5ldyBDYW52YXMoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsIGNhbWVyYSlcbiAgICBib2FyZC5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KVxuICAgIFxuICAgIGNvbnN0IHNjZW5lID0gbmV3IFNjZW5lKClcbiAgICBjb25zdCBrZXlib2FyZENvbnRyb2xzID0gbmV3IEtleWJvYXJkKGNhbWVyYSwgYm9hcmQpXG4gICAgY29uc3QgcGxhbmV0cyA9IGdldFBsYW5ldHMoYm9hcmQsIGNhbWVyYSlcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGtleWJvYXJkQ29udHJvbHMuaGFuZGxlS2V5Ym9hcmQuYmluZChrZXlib2FyZENvbnRyb2xzKSk7XG4gICAgXG4gICAgZm9yIChsZXQgaSBpbiBwbGFuZXRzKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwbGFuZXRzW2ldXG4gICAgICAgIHNjZW5lLmVudGl0aWVzLnB1c2gobmV3IFBsYW5ldChpLCBwLngsIHAueSwgcC5yYWRpdXMsIHAuY29sb3IsIHAudmVsb2NpdHkpKVxuICAgIH1cblxuICAgIC8vIHNjZW5lLmVudGl0aWVzLnB1c2gobmV3IFBsYW5ldChcIjFcIiwgQ29uZmlnLnNwYWNlVyAvIDIgKyBib2FyZC5jYW52YXMud2lkdGggLyAyICsgMTIwLCBDb25maWcuc3BhY2VIIC8gMiArIGJvYXJkLmNhbnZhcy5oZWlnaHQgLyAyICsgMTIwLCAxMjAsIFwiI2ZmZmZmZlwiLCBbMCwgMF0pKVxuICAgIC8vIHNjZW5lLmVudGl0aWVzLnB1c2gobmV3IFBsYW5ldChcIjJcIiwgQ29uZmlnLnNwYWNlVyAvIDIgKyBib2FyZC5jYW52YXMud2lkdGggLyAzICsgODAsIENvbmZpZy5zcGFjZUggLyAyICsgYm9hcmQuY2FudmFzLmhlaWdodCAvIDQgKyA4MCwgODAsIFwiIzc4NDU3M1wiLCBbMCwgMF0pKVxuXG4gICAgYm9hcmQuZW50aXRpZXMucHVzaChzY2VuZSlcbiAgICBcbiAgICBtYWluKDAsIDAsIGJvYXJkKVxuIH0iLCJpbXBvcnQgQ29uZmlnIGZyb20gXCIuL3NyYy9Db25maWdcIlxuaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9zcmMvQ2FudmFzL0NhbnZhc1wiXG5pbXBvcnQgQ2FtZXJhIGZyb20gXCIuL3NyYy9DYW1lcmEvQ2FtZXJhXCJcblxuZXhwb3J0IGRlZmF1bHQgKGNhbnZhczogQ2FudmFzLCBjYW1lcmE6IENhbWVyYSk6IHtba2V5OiBzdHJpbmddOiBhbnl9ID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCIxXCI6IHtcbiAgICAgICAgICAgICAgICB4OiBjYW1lcmEuWChjYW52YXMuY2FudmFzLndpZHRoIC8gMiArIDEyMCksXG4gICAgICAgICAgICAgICAgeTogY2FtZXJhLlkoY2FudmFzLmNhbnZhcy53aWR0aCAvIDIgKyAxMjApLFxuICAgICAgICAgICAgICAgIHJhZGl1czogMTIwLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIixcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eTogWzAsIDBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIyXCI6IHtcbiAgICAgICAgICAgICAgICB4OiBjYW1lcmEuWChjYW52YXMuY2FudmFzLndpZHRoIC8gMyArIDgwKSxcbiAgICAgICAgICAgICAgICB5OiBjYW1lcmEuWShjYW52YXMuY2FudmFzLmhlaWdodCAvIDQgKyA4MCksXG4gICAgICAgICAgICAgICAgcmFkaXVzOiA4MCxcbiAgICAgICAgICAgICAgICBjb2xvcjogXCIjNzg0NTczXCIsXG4gICAgICAgICAgICAgICAgdmVsb2NpdHk6IFswLCAwXSAgXG4gICAgICAgICAgICB9XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=